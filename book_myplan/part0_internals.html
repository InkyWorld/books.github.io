<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>0.1 Python Internals ‚Äî ScaleTrade</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&family=JetBrains+Mono:wght@400;500&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <div class="book-layout">
        <aside class="sidebar">
            <div class="sidebar-header">
                <a href="index.html" class="logo">
                    <div class="logo-icon">üìà</div>
                    <span>ScaleTrade</span>
                </a>
            </div>
            <nav class="sidebar-nav">
    <div class="nav-section">
        <div class="nav-section-title">Intro</div>
        <a href="index.html" class="nav-link">üè† –ì–ª–∞–≤–Ω–∞—è</a>
        <a href="setup.html" class="nav-link">üõ† Setup</a>
    </div>
    <div class="nav-section">
        <div class="nav-section-title">Part 0: Fundamentals</div>
        <a href="part0_internals.html" class="nav-link active">0.1 Internals</a>
        <a href="part0_networking.html" class="nav-link">0.2 Networking</a>
    </div>
    <div class="nav-section">
        <div class="nav-section-title">Part 1: Postgres</div>
        <a href="part1_schema.html" class="nav-link">1.1 Schema</a>
        <a href="part1_indexes.html" class="nav-link">1.2 Indexes</a>
        <a href="part1_transactions.html" class="nav-link">1.3 Transactions</a>
    </div>
    <div class="nav-section">
        <div class="nav-section-title">Part 2: Litestar</div>
        <a href="part2_litestar.html" class="nav-link">2.1 Framework</a>
        <a href="part2_dishka.html" class="nav-link">2.2 DI (Dishka)</a>
    </div>
    <div class="nav-section">
        <div class="nav-section-title">Part 3: Brokers</div>
        <a href="part3_redis.html" class="nav-link">3.1 Redis</a>
        <a href="part3_faststream.html" class="nav-link">3.2 FastStream</a>
    </div>
    <div class="nav-section">
        <div class="nav-section-title">Part 4: Quality</div>
        <a href="part4_testing.html" class="nav-link">4.1 Pytest</a>
        <a href="part4_resiliency.html" class="nav-link">4.2 Resilience</a>
    </div>
    <div class="nav-section">
        <div class="nav-section-title">Part 5: Observability</div>
        <a href="part5_clickhouse.html" class="nav-link">5.1 Clickhouse</a>
        <a href="part5_logging.html" class="nav-link">5.2 Structured Logs</a>
    </div>
    <div class="nav-section">
        <div class="nav-section-title">Part 6: Django</div>
        <a href="part6_django.html" class="nav-link">6.1 ORM</a>
        <a href="part6_migrations.html" class="nav-link">6.2 Migrations</a>
        <a href="part6_quality.html" class="nav-link">6.3 Quality</a>
    </div>
    <div class="nav-section">
        <div class="nav-section-title">Part 7: Microservices</div>
        <a href="part7_grpc.html" class="nav-link">7.1 gRPC</a>
        <a href="part7_graphql.html" class="nav-link">7.2 GraphQL</a>
        <a href="part7_federation.html" class="nav-link">7.3 Federation</a>
    </div>
    <div class="nav-section">
        <div class="nav-section-title">Part 8: Async</div>
        <a href="part8_asyncio.html" class="nav-link">8.1 Asyncio</a>
        <a href="part8_celery.html" class="nav-link">8.2 Celery</a>
        <a href="part8_dramatiq.html" class="nav-link">8.3 Dramatiq</a>
    </div>
    <div class="nav-section">
        <div class="nav-section-title">Part 9: API</div>
        <a href="part9_restdesign.html" class="nav-link">9.1 REST Design</a>
        <a href="part9_idempotency.html" class="nav-link">9.2 Idempotency</a>
        <a href="part9_openapi.html" class="nav-link">9.3 OpenAPI</a>
    </div>
    <div class="nav-section">
        <div class="nav-section-title">Part 10: Culture</div>
        <a href="part10_git.html" class="nav-link">10.1 Git</a>
        <a href="part10_commits.html" class="nav-link">10.2 Commits</a>
        <a href="part10_codereview.html" class="nav-link">10.3 Post-Review</a>
    </div>
    <div class="nav-section">
        <div class="nav-section-title">Part 11: Security</div>
        <a href="part11_oauth.html" class="nav-link">11.1 OAuth2</a>
        <a href="part11_vault.html" class="nav-link">11.2 Vault</a>
        <a href="part11_owasp.html" class="nav-link">11.3 OWASP</a>
    </div>
    <div class="nav-section">
        <div class="nav-section-title">Part 12: Kubernetes</div>
        <a href="part12_kubernetes.html" class="nav-link">12.1 K8s Basics</a>
    </div>
    <div class="nav-section">
        <div class="nav-section-title">Part 13: High Load</div>
        <a href="part13_profiling.html" class="nav-link">13.1 Profiling</a>
        <a href="part13_caching.html" class="nav-link">13.2 Caching</a>
        <a href="part13_loadbalancing.html" class="nav-link">13.3 Load Balancing</a>
    </div>
    <div class="nav-section">
        <div class="nav-section-title">Part 14: ML Ops</div>
        <a href="part14_mlflow.html" class="nav-link">14.1 MLflow</a>
        <a href="part14_embeddings.html" class="nav-link">14.2 Embeddings</a>
        <a href="part14_llm.html" class="nav-link">14.3 LLM</a>
    </div>
    <div class="nav-section">
        <div class="nav-section-title">Part 15: Debugging</div>
        <a href="part15_debugging.html" class="nav-link">15.1 Debugging</a>
        <a href="part15_postmortem.html" class="nav-link">15.2 Postmortem</a>
        <a href="part15_chaos.html" class="nav-link">15.3 Chaos Eng</a>
    </div>
    <div class="nav-section">
        <div class="nav-section-title">Part 16: DB Advanced</div>
        <a href="part16_indexes.html" class="nav-link">16.1 Indexes Deep</a>
        <a href="part16_isolation.html" class="nav-link">16.2 Isolation</a>
        <a href="part16_sharding.html" class="nav-link">16.3 Sharding</a>
    </div>
    <div class="nav-section">
        <div class="nav-section-title">Part 17: System Design</div>
        <a href="part17_circuit.html" class="nav-link">17.1 Circuit Breaker</a>
        <a href="part17_ratelimit.html" class="nav-link">17.2 Rate Limit</a>
        <a href="part17_distlock.html" class="nav-link">17.3 Dist Lock</a>
    </div>
    <div class="nav-section">
        <div class="nav-section-title">Part 18: Soft Skills</div>
        <a href="part18_estimation.html" class="nav-link">18.1 Estimation</a>
        <a href="part18_burnout.html" class="nav-link">18.2 Burnout</a>
        <a href="part18_interview.html" class="nav-link">18.3 Interview</a>
    </div>
</nav>
        </aside>

        <main class="main-content">
            <header class="header">
                <div class="breadcrumb">
                    <a href="index.html">ScaleTrade</a>
                    <span>/</span>
                    <span>–ß–∞—Å—Ç—å 0</span>
                    <span>/</span>
                    <span>0.1 Internals</span>
                </div>
            </header>

            <div class="page-content">
                <h1>–ú–æ–¥—É–ª—å 0.1: Python Internals</h1>
                <p class="lead">–ß—Ç–æ–±—ã –ø–∏—Å–∞—Ç—å —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω—ã–π –∫–æ–¥, –Ω—É–∂–Ω–æ –ø–æ–Ω–∏–º–∞—Ç—å, –∫–∞–∫ –æ–Ω –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è. 
                –†–∞–∑–±–∏—Ä–∞–µ–º—Å—è —Å CPython, GIL, Garbage Collector –∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ–º –ø–∞–º—è—Ç—å—é.</p>

                <h2>1. CPython Execution Model</h2>
                <p>Python ‚Äî –∏–Ω—Ç–µ—Ä–ø—Ä–µ—Ç–∏—Ä—É–µ–º—ã–π —è–∑—ã–∫, –Ω–æ –Ω–µ —Å–æ–≤—Å–µ–º. –í–∞—à –∫–æ–¥ (<code>.py</code>) —Å–Ω–∞—á–∞–ª–∞ –∫–æ–º–ø–∏–ª–∏—Ä—É–µ—Ç—Å—è –≤ <strong>–±–∞–π—Ç-–∫–æ–¥</strong> (<code>.pyc</code>), –∞ –∑–∞—Ç–µ–º —ç—Ç–æ—Ç –±–∞–π—Ç-–∫–æ–¥ –∏—Å–ø–æ–ª–Ω—è–µ—Ç—Å—è –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–π –º–∞—à–∏–Ω–æ–π (VM) CPython.</p>
                
                <div class="card">
                    <h4>üõ†Ô∏è –≠—Ç–∞–ø—ã –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è:</h4>
                    <ol>
                        <li><strong>Lexing & Parsing:</strong> –ò—Å—Ö–æ–¥–Ω—ã–π –∫–æ–¥ –ø—Ä–µ–≤—Ä–∞—â–∞–µ—Ç—Å—è –≤ AST (Abstract Syntax Tree). –°–∏–Ω—Ç–∞–∫—Å–∏—á–µ—Å–∫–∏–µ –æ—à–∏–±–∫–∏ –ª–æ–≤—è—Ç—Å—è —Ç—É—Ç.</li>
                        <li><strong>Compilation:</strong> AST –ø—Ä–µ–≤—Ä–∞—â–∞–µ—Ç—Å—è –≤ Bytecode. –≠—Ç–æ –Ω–∞–±–æ—Ä –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–π –¥–ª—è —Å—Ç–µ–∫–æ–≤–æ–π –º–∞—à–∏–Ω—ã (LOAD_FAST, BINARY_ADD).</li>
                        <li><strong>Interpretation:</strong> –í–∏—Ä—Ç—É–∞–ª—å–Ω–∞—è –º–∞—à–∏–Ω–∞ (PVM) —á–∏—Ç–∞–µ—Ç –±–∞–π—Ç-–∫–æ–¥ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –∑–∞ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–µ–π.</li>
                    </ol>
                </div>

                <p>–ü–æ—Å–º–æ—Ç—Ä–µ—Ç—å –±–∞–π—Ç-–∫–æ–¥ –º–æ–∂–Ω–æ –º–æ–¥—É–ª–µ–º <code>dis</code>:</p>
<pre><code class="language-python">import dis
def add(a, b):
    return a + b

dis.dis(add)
#  2           0 LOAD_FAST                0 (a)
#              2 LOAD_FAST                1 (b)
#              4 BINARY_ADD
#              6 RETURN_VALUE
</code></pre>
                <div class="info-box info">
                    <p>–≠—Ç–æ—Ç –±–∞–π—Ç-–∫–æ–¥ –∫—Ä–æ—Å—Å–ø–ª–∞—Ç—Ñ–æ—Ä–º–µ–Ω–Ω—ã–π (–æ–±—ã—á–Ω–æ), –Ω–æ –ø—Ä–∏–≤—è–∑–∞–Ω –∫ –≤–µ—Ä—Å–∏–∏ Python. PVM ‚Äî —ç—Ç–æ –ø—Ä–æ—Å—Ç–æ –≥–∏–≥–∞–Ω—Ç—Å–∫–∏–π —Ü–∏–∫–ª <code>for(;;)</code> —Å <code>switch(opcode)</code> –≤–Ω—É—Ç—Ä–∏, –Ω–∞–ø–∏—Å–∞–Ω–Ω—ã–π –Ω–∞ C.</p>
                </div>

                <h2>2. Global Interpreter Lock (GIL)</h2>
                <p>GIL ‚Äî —ç—Ç–æ –º—å—é—Ç–µ–∫—Å (Lock), –∑–∞—â–∏—â–∞—é—â–∏–π –≤–Ω—É—Ç—Ä–µ–Ω–Ω–∏–µ —Å—Ç—Ä—É–∫—Ç—É—Ä—ã –ø–∞–º—è—Ç–∏ CPython –æ—Ç race conditions. –ò–∑-–∑–∞ —Å–∏—Å—Ç–µ–º—ã –ø–æ–¥—Å—á–µ—Ç–∞ —Å—Å—ã–ª–æ–∫ (Reference Counting) –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ–µ –∏–∑–º–µ–Ω–µ–Ω–∏–µ —Å—á–µ—Ç—á–∏–∫–∞ –∏–∑ —Ä–∞–∑–Ω—ã—Ö –ø–æ—Ç–æ–∫–æ–≤ –ø—Ä–∏–≤–µ–ª–æ –±—ã –∫ –∫—Ä–∞—Ö—É.</p>
                
                <h3>–ü–æ—á–µ–º—É GIL –¥–æ —Å–∏—Ö –ø–æ—Ä —Å—É—â–µ—Å—Ç–≤—É–µ—Ç?</h3>
                <p>–£–¥–∞–ª–µ–Ω–∏–µ GIL (–ø—Ä–æ–µ–∫—Ç No-GIL / PEP 703) –¥–µ–ª–∞–µ—Ç –æ–¥–Ω–æ–ø–æ—Ç–æ—á–Ω—ã–π –∫–æ–¥ –º–µ–¥–ª–µ–Ω–Ω–µ–µ (–∏–∑-–∑–∞ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏ –ø–æ—Å—Ç–æ—è–Ω–Ω—ã—Ö –±–ª–æ–∫–∏—Ä–æ–≤–æ–∫ –Ω–∞ –∫–∞–∂–¥–æ–π –æ–ø–µ—Ä–∞—Ü–∏–∏ —Å reference count). CPython –æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω –¥–ª—è –æ–¥–Ω–æ–ø–æ—Ç–æ—á–Ω–æ–π –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏. GIL –≥–∞—Ä–∞–Ω—Ç–∏—Ä—É–µ—Ç, —á—Ç–æ —Ç–æ–ª—å–∫–æ –æ–¥–∏–Ω –ø–æ—Ç–æ–∫ Python-–∫–æ–¥–∞ –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è –≤ –æ–¥–∏–Ω –º–æ–º–µ–Ω—Ç –≤—Ä–µ–º–µ–Ω–∏ –≤–Ω—É—Ç—Ä–∏ –æ–¥–Ω–æ–≥–æ –ø—Ä–æ—Ü–µ—Å—Å–∞.</p>

                <h3>–í–ª–∏—è–Ω–∏–µ –Ω–∞ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å</h3>
                <div class="comparison-table">
                    <div class="comparison-col good">
                        <h4>üü¢ I/O Bound (–°–µ—Ç—å/–î–∏—Å–∫)</h4>
                        <p><strong>GIL –ù–ï –º–µ—à–∞–µ—Ç.</strong> –ü—Ä–∏ —Å–∏—Å—Ç–µ–º–Ω—ã—Ö –≤—ã–∑–æ–≤–∞—Ö (socket read, file write) GIL –æ—Ç–ø—É—Å–∫–∞–µ—Ç—Å—è. –°–æ—Ç–Ω–∏ –ø–æ—Ç–æ–∫–æ–≤ –º–æ–≥—É—Ç —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ –∂–¥–∞—Ç—å —Å–µ—Ç—å.</p>
                        <ul>
                            <li>Web-—Å–µ—Ä–≤–µ—Ä—ã</li>
                            <li>–ó–∞–ø—Ä–æ—Å—ã –≤ –ë–î (Postgres, Redis)</li>
                        </ul>
                    </div>
                    <div class="comparison-col bad">
                        <h4>üî¥ CPU Bound (–í—ã—á–∏—Å–ª–µ–Ω–∏—è)</h4>
                        <p><strong>GIL –º–µ—à–∞–µ—Ç.</strong> –ü–æ—Ç–æ–∫–∏ –¥–µ—Ä—É—Ç—Å—è –∑–∞ –∑–∞—Ö–≤–∞—Ç GIL. –ú–Ω–æ–≥–æ–ø–æ—Ç–æ—á–Ω–æ—Å—Ç—å –º–æ–∂–µ—Ç —Ä–∞–±–æ—Ç–∞—Ç—å <em>–º–µ–¥–ª–µ–Ω–Ω–µ–µ</em>, —á–µ–º 1 –ø–æ—Ç–æ–∫ (–∏–∑-–∑–∞ –Ω–∞–∫–ª–∞–¥–Ω—ã—Ö —Ä–∞—Å—Ö–æ–¥–æ–≤ –Ω–∞ context switch).</p>
                        <ul>
                            <li>ML-–æ–±—É—á–µ–Ω–∏–µ (–≤ —á–∏—Å—Ç–æ–º Py)</li>
                            <li>–û–±—Ä–∞–±–æ—Ç–∫–∞ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π</li>
                            <li>–°–µ—Ä–∏–∞–ª–∏–∑–∞—Ü–∏—è JSON</li>
                        </ul>
                    </div>
                </div>

                <div class="info-box tip">
                    <div class="info-box-title">üí° C-Extensions –æ–±—Ö–æ–¥—è—Ç GIL</div>
                    <p>–ë–∏–±–ª–∏–æ—Ç–µ–∫–∏, –Ω–∞–ø–∏—Å–∞–Ω–Ω—ã–µ –Ω–∞ C/C++ (NumPy, TensorFlow, lxml), –º–æ–≥—É—Ç —è–≤–Ω–æ –æ—Ç–ø—É—Å–∫–∞—Ç—å GIL –Ω–∞ –≤—Ä–µ–º—è —Ç—è–∂–µ–ª—ã—Ö –≤—ã—á–∏—Å–ª–µ–Ω–∏–π. –ü–æ—ç—Ç–æ–º—É NumPy –±—ã—Å—Ç—Ä—ã–π –¥–∞–∂–µ –≤ —Ç—Ä–µ–¥–∞—Ö.</p>
                </div>

                <h2>3. Memory Management Deep Dive</h2>
                <p>–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–∞–º—è—Ç—å—é –≤ Python —Å–æ—Å—Ç–æ–∏—Ç –∏–∑ —Å–ª–æ–µ–≤: OS Allocator (malloc) -> PyMalloc -> Python Objects.</p>
                
                <h3>Allocation Strategy (Arenas, Pools, Blocks)</h3>
                <p>–ß—Ç–æ–±—ã –Ω–µ –¥–µ—Ä–≥–∞—Ç—å –º–µ–¥–ª–µ–Ω–Ω—ã–π —Å–∏—Å—Ç–µ–º–Ω—ã–π <code>malloc</code> –¥–ª—è –∫–∞–∂–¥–æ–≥–æ int'–∞, Python –∑–∞—Ö–≤–∞—Ç—ã–≤–∞–µ—Ç –ø–∞–º—è—Ç—å –±–æ–ª—å—à–∏–º–∏ –∫—É—Å–∫–∞–º–∏:</p>
                <ul>
                    <li><strong>Arena (256KB):</strong> –ë–æ–ª—å—à–æ–π –∫—É—Å–æ–∫ –ø–∞–º—è—Ç–∏ –æ—Ç –û–°.</li>
                    <li><strong>Pool (4KB):</strong> –í–Ω—É—Ç—Ä–∏ –∞—Ä–µ–Ω—ã. –î–µ–ª–∏—Ç—Å—è –Ω–∞ –±–ª–æ–∫–∏ —Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω–æ–≥–æ —Ä–∞–∑–º–µ—Ä–∞ (–Ω–∞–ø—Ä–∏–º–µ—Ä, –ø—É–ª –¥–ª—è –æ–±—ä–µ–∫—Ç–æ–≤ –ø–æ 32 –±–∞–π—Ç–∞).</li>
                    <li><strong>Block:</strong> –ú–µ—Å—Ç–æ –ø–æ–¥ –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–π –æ–±—ä–µ–∫—Ç.</li>
                </ul>
                <p>–≠—Ç–æ –Ω–∞–∑—ã–≤–∞–µ—Ç—Å—è <strong>PyMalloc</strong>. –û–Ω —Ä–∞–±–æ—Ç–∞–µ—Ç –¥–ª—è –æ–±—ä–µ–∫—Ç–æ–≤ < 512 –±–∞–π—Ç. –ë–æ–ª—å—à–∏–µ –æ–±—ä–µ–∫—Ç—ã –∏–¥—É—Ç –Ω–∞–ø—Ä—è–º—É—é —á–µ—Ä–µ–∑ <code>malloc</code>.</p>

                <h3>Reference Counting (–ì–ª–∞–≤–Ω—ã–π –º–µ—Ö–∞–Ω–∏–∑–º)</h3>
                <p>–ö–∞–∂–¥—ã–π –æ–±—ä–µ–∫—Ç —Ö—Ä–∞–Ω–∏—Ç —Å—á–µ—Ç—á–∏–∫ —Å—Å—ã–ª–æ–∫ (<code>ob_refcnt</code>). –ö–æ–≥–¥–∞ –æ–Ω —Ä–∞–≤–µ–Ω 0, –ø–∞–º—è—Ç—å –æ—Å–≤–æ–±–æ–∂–¥–∞–µ—Ç—Å—è <strong>–º–æ–º–µ–Ω—Ç–∞–ª—å–Ω–æ</strong>.</p>
                <div class="code-block">
<pre><code class="language-python">import sys
a = object()
print(sys.getrefcount(a))  # 2 (–ø–µ—Ä–µ–º–µ–Ω–Ω–∞—è 'a' + –∞—Ä–≥—É–º–µ–Ω—Ç —Ñ—É–Ω–∫—Ü–∏–∏)
del a                      # –°—á–µ—Ç—á–∏–∫ -> 0, –ø–∞–º—è—Ç—å –æ—Å–≤–æ–±–æ–∂–¥–µ–Ω–∞</code></pre>
                </div>

                <h3>Cyclic GC (–í—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω—ã–π –º–µ—Ö–∞–Ω–∏–∑–º)</h3>
                <p>–ß—Ç–æ –µ—Å–ª–∏ –æ–±—ä–µ–∫—Ç—ã —Å—Å—ã–ª–∞—é—Ç—Å—è –¥—Ä—É–≥ –Ω–∞ –¥—Ä—É–≥–∞ (A -> B -> A)? –°—á–µ—Ç—á–∏–∫ –Ω–∏–∫–æ–≥–¥–∞ –Ω–µ —Å—Ç–∞–Ω–µ—Ç 0. –î–ª—è —ç—Ç–æ–≥–æ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç "Generation Garbage Collector".</p>
                <ul>
                    <li><strong>Generations (–ü–æ–∫–æ–ª–µ–Ω–∏—è):</strong> 0, 1, 2. –ù–æ–≤—ã–µ –æ–±—ä–µ–∫—Ç—ã –ø–æ–ø–∞–¥–∞—é—Ç –≤ Gen 0. –ï—Å–ª–∏ –≤—ã–∂–∏–≤–∞—é—Ç ‚Äî –ø–µ—Ä–µ—Ö–æ–¥—è—Ç –≤ Gen 1.</li>
                    <li><strong>Thresholds:</strong> –°–±–æ—Ä–∫–∞ –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è, –∫–æ–≥–¥–∞ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –∞–ª–ª–æ–∫–∞—Ü–∏–π –ø—Ä–µ–≤—ã—à–∞–µ—Ç –¥–µ–∞–ª–ª–æ–∫–∞—Ü–∏–∏ –Ω–∞ N (700 –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é).</li>
                    <li>GC –æ—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç –º–∏—Ä (Stop-the-World) –Ω–∞ –∫–æ—Ä–æ—Ç–∫–æ–µ –≤—Ä–µ–º—è.</li>
                </ul>

                <h2>4. Optimization Techniques</h2>
                
                <h3>__slots__ vs __dict__</h3>
                <p>–û–±—ã—á–Ω—ã–µ –æ–±—ä–µ–∫—Ç—ã —Ö—Ä–∞–Ω—è—Ç –∞—Ç—Ä–∏–±—É—Ç—ã –≤ <code>__dict__</code> (hash map), —á—Ç–æ –ø–æ—Ç—Ä–µ–±–ª—è–µ—Ç –º–Ω–æ–≥–æ –ø–∞–º—è—Ç–∏. <code>__slots__</code> –∑–∞—Å—Ç–∞–≤–ª—è–µ—Ç Python –≤—ã–¥–µ–ª–∏—Ç—å —Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –º–∞—Å—Å–∏–≤ –ø–∞–º—è—Ç–∏ (–∫–∞–∫ struct –≤ C), —É–±–∏—Ä–∞—è –æ–≤–µ—Ä—Ö–µ–¥ —Å–ª–æ–≤–∞—Ä—è.</p>
                <div class="code-block">
<pre><code class="language-python">class RegularPoint:
    def __init__(self, x, y):
        self.x = x  # –•—Ä–∞–Ω–∏—Ç—Å—è –≤ –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–æ–º __dict__
        self.y = y

class SlotPoint:
    __slots__ = ('x', 'y')  # –•—Ä–∞–Ω–∏—Ç—Å—è –≤ —Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω–æ–º –º–∞—Å—Å–∏–≤–µ
    def __init__(self, x, y):
        self.x = x
        self.y = y
# SlotPoint –ø–æ—Ç—Ä–µ–±–ª—è–µ—Ç –≤ ~3 —Ä–∞–∑–∞ –º–µ–Ω—å—à–µ –ø–∞–º—è—Ç–∏!</code></pre>
                </div>

                <h3>Mutable vs Immutable (Interning)</h3>
                <p>Python –∫—ç—à–∏—Ä—É–µ—Ç (interini—Ä—É–µ—Ç) –º–∞–ª—ã–µ —Ü–µ–ª—ã–µ —á–∏—Å–ª–∞ (-5..256) –∏ –∫–æ—Ä–æ—Ç–∫–∏–µ —Å—Ç—Ä–æ–∫–∏. –≠—Ç–æ "—Å–∏–Ω–≥–ª—Ç–æ–Ω—ã".</p>


                <h2>3. Asyncio Event Loop</h2>
                <p>Asyncio ‚Äî —ç—Ç–æ –∫–æ–æ–ø–µ—Ä–∞—Ç–∏–≤–Ω–∞—è –º–Ω–æ–≥–æ–∑–∞–¥–∞—á–Ω–æ—Å—Ç—å. –û—Å–Ω–æ–≤–∞ ‚Äî Event Loop (—Ü–∏–∫–ª —Å–æ–±—ã—Ç–∏–π).</p>

                <div class="comparison-table">
                    <div class="comparison-col">
                        <h4>Sync (Blocking)</h4>
                        <p>–ö–æ–¥ –∂–¥—ë—Ç –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è –≤–≤–æ–¥–∞-–≤—ã–≤–æ–¥–∞, –±–ª–æ–∫–∏—Ä—É—è –≤–µ—Å—å –ø–æ—Ç–æ–∫.</p>
<pre><code class="language-python">import time
def task():
    time.sleep(1) # Block
    print("Done")
</code></pre>
                    </div>
                    <div class="comparison-col good">
                        <h4>Async (Non-blocking)</h4>
                        <p>Event Loop –ø–µ—Ä–µ–∫–ª—é—á–∞–µ—Ç—Å—è –Ω–∞ –¥—Ä—É–≥—É—é –∑–∞–¥–∞—á—É –≤–æ –≤—Ä–µ–º—è –æ–∂–∏–¥–∞–Ω–∏—è.</p>
<pre><code class="language-python">import asyncio
async def task():
    await asyncio.sleep(1) # Yield
    print("Done")
</code></pre>
                    </div>
                </div>

                <h2>ü™® –ü–æ–¥–≤–æ–¥–Ω—ã–µ –∫–∞–º–Ω–∏</h2>
                <div class="accordion">
                    <div class="accordion-item">
                        <div class="accordion-header">
                            <strong>1. gc.disable() –∏ Reference Counting</strong>
                        </div>
                        <div class="accordion-content">
                            <p>–í—ã–∑–æ–≤ <code>gc.disable()</code> –æ—Ç–∫–ª—é—á–∞–µ—Ç —Ç–æ–ª—å–∫–æ —Ü–∏–∫–ª–∏—á–µ—Å–∫–∏–π —Å–±–æ—Ä—â–∏–∫ –º—É—Å–æ—Ä–∞. Reference Counting –ø—Ä–æ–¥–æ–ª–∂–∞–µ—Ç —Ä–∞–±–æ—Ç–∞—Ç—å –≤—Å–µ–≥–¥–∞. –í –Ω–µ–∫–æ—Ç–æ—Ä—ã—Ö –≤—ã—Å–æ–∫–æ–Ω–∞–≥—Ä—É–∂–µ–Ω–Ω—ã—Ö –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è—Ö (–∫–∞–∫ Instagram) –æ—Ç–∫–ª—é—á–∞–ª–∏ GC –¥–ª—è —É–º–µ–Ω—å—à–µ–Ω–∏—è Copy-on-Write –ø—Ä–∏ —Ñ–æ—Ä–∫–µ –ø—Ä–æ—Ü–µ—Å—Å–æ–≤.</p>
                        </div>
                    </div>
                    <div class="accordion-item">
                        <div class="accordion-header">
                            <strong>2. Memory Leak –≤ Asyncio</strong>
                        </div>
                        <div class="accordion-content">
                            <p>–ï—Å–ª–∏ –≤—ã —Å–æ–∑–¥–∞–µ—Ç–µ Task –∏ –Ω–µ —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç–µ —Å—Å—ã–ª–∫—É –Ω–∞ –Ω–µ–≥–æ (fire-and-forget), —Å–±–æ—Ä—â–∏–∫ –º—É—Å–æ—Ä–∞ –º–æ–∂–µ—Ç —É–¥–∞–ª–∏—Ç—å –∑–∞–¥–∞—á—É –¥–æ –µ—ë –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è –≤ —Å—Ç–∞—Ä—ã—Ö –≤–µ—Ä—Å–∏—è—Ö Python. –í—Å–µ–≥–¥–∞ —Å–æ—Ö—Ä–∞–Ω—è–π—Ç–µ —Å—Å—ã–ª–∫–∏ –Ω–∞ —Ñ–æ–Ω–æ–≤—ã–µ –∑–∞–¥–∞—á–∏ (–Ω–∞–ø—Ä–∏–º–µ—Ä –≤ <code>set</code>).</p>
                        </div>
                    </div>
                </div>

                <h2>üí° –õ–∞–π—Ñ—Ö–∞–∫–∏</h2>
                <ul>
                    <li><strong>__slots__:</strong> –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ <code>__slots__</code> –≤ –∫–ª–∞—Å—Å–∞—Ö, –µ—Å–ª–∏ —Å–æ–∑–¥–∞–µ—Ç–µ –º–∏–ª–ª–∏–æ–Ω—ã —ç–∫–∑–µ–º–ø–ª—è—Ä–æ–≤. –≠—Ç–æ —ç–∫–æ–Ω–æ–º–∏—Ç –ø–∞–º—è—Ç—å, –æ—Ç–∫–∞–∑—ã–≤–∞—è—Å—å –æ—Ç <code>__dict__</code>.</li>
                    <li><strong>uvloop:</strong> –ë—ã—Å—Ç—Ä–∞—è, drop-in –∑–∞–º–µ–Ω–∞ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–æ–º—É event loop –Ω–∞ –æ—Å–Ω–æ–≤–µ libuv (–∫–∞–∫ –≤ Node.js). –ü—Ä–æ—Å—Ç–æ –¥–æ–±–∞–≤—å—Ç–µ <code>uvloop.install()</code>.</li>
                    <li><strong>orjson:</strong> –°–∞–º–∞—è –±—ã—Å—Ç—Ä–∞—è –±–∏–±–ª–∏–æ—Ç–µ–∫–∞ –¥–ª—è JSON –≤ Python. –ò—Å–ø–æ–ª—å–∑—É–µ—Ç Rust, –æ–±—Ö–æ–¥–∏—Ç –º–Ω–æ–≥–∏–µ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è GIL –ø—Ä–∏ —Å–µ—Ä–∏–∞–ª–∏–∑–∞—Ü–∏–∏.</li>
                </ul>
            </div>
        </main>
    </div>
</body>
</html>