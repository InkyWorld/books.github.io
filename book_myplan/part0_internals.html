<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>0.1 Python Internals ‚Äî ScaleTrade</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&family=JetBrains+Mono:wght@400;500&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <div class="book-layout">
        <aside class="sidebar">
            <div class="sidebar-header">
                <a href="index.html" class="logo">
                    <div class="logo-icon">üìà</div>
                    <span>ScaleTrade</span>
                </a>
            </div>
            <nav class="sidebar-nav">
                <div class="nav-section">
                    <div class="nav-section-title">–í–≤–µ–¥–µ–Ω–∏–µ</div>
                    <a href="index.html" class="nav-link">üè† –ì–ª–∞–≤–Ω–∞—è</a>
                </div>
                <!-- ... Navigation will be updated later or kept simple for now ... -->
                <div class="nav-section">
                    <div class="nav-section-title">–ß–∞—Å—Ç—å 0: Core</div>
                    <a href="part0_internals.html" class="nav-link active">0.1 Python Internals</a>
                    <a href="part0_networking.html" class="nav-link">0.2 Networking & Linux</a>
                </div>
                <div class="nav-section">
                    <div class="nav-section-title">–ß–∞—Å—Ç—å 9: API</div>
                    <a href="part9_restdesign.html" class="nav-link">9.1 REST Design</a>
                    <a href="part9_idempotency.html" class="nav-link">9.2 Idempotency</a>
                    <a href="part9_openapi.html" class="nav-link">9.3 OpenAPI</a>
                </div>
                 <div class="nav-section">
                    <div class="nav-section-title">–ß–∞—Å—Ç—å 10: Git & Culture</div>
                    <a href="part10_git.html" class="nav-link">10.1 Git Advanced</a>
                    <a href="part10_commits.html" class="nav-link">10.2 Semantic Commits</a>
                    <a href="part10_codereview.html" class="nav-link">10.3 Code Review</a>
                </div>
            </nav>
        </aside>

        <main class="main-content">
            <header class="header">
                <div class="breadcrumb">
                    <a href="index.html">ScaleTrade</a>
                    <span>/</span>
                    <span>–ß–∞—Å—Ç—å 0</span>
                    <span>/</span>
                    <span>0.1 Internals</span>
                </div>
            </header>

            <div class="page-content">
                <h1>–ú–æ–¥—É–ª—å 0.1: Python Internals</h1>
                <p class="lead">–ß—Ç–æ–±—ã –ø–∏—Å–∞—Ç—å —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω—ã–π –∫–æ–¥, –Ω—É–∂–Ω–æ –ø–æ–Ω–∏–º–∞—Ç—å, –∫–∞–∫ –æ–Ω –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è. 
                –†–∞–∑–±–∏—Ä–∞–µ–º—Å—è —Å GIL, Garbage Collector –∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ–º –ø–∞–º—è—Ç—å—é.</p>

                <h2>1. Global Interpreter Lock (GIL)</h2>
                <p>GIL ‚Äî —ç—Ç–æ –º—å—é—Ç–µ–∫—Å, –∫–æ—Ç–æ—Ä—ã–π –∑–∞—â–∏—â–∞–µ—Ç –¥–æ—Å—Ç—É–ø –∫ –æ–±—ä–µ–∫—Ç–∞–º Python, –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–∞—è –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ–≥–æ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö –ø–æ—Ç–æ–∫–æ–≤ –±–∞–π—Ç-–∫–æ–¥–∞ Python.</p>

                <div class="info-box danger">
                    <div class="info-box-title">–ú–∏—Ñ</div>
                    <p>–ú–Ω–æ–≥–∏–µ —Å—á–∏—Ç–∞—é—Ç, —á—Ç–æ –∏–∑-–∑–∞ GIL –º–Ω–æ–≥–æ–ø–æ—Ç–æ—á–Ω–æ—Å—Ç—å –≤ Python –±–µ—Å–ø–æ–ª–µ–∑–Ω–∞. –≠—Ç–æ –Ω–µ —Ç–∞–∫. GIL –º–µ—à–∞–µ—Ç —Ç–æ–ª—å–∫–æ CPU-bound –∑–∞–¥–∞—á–∞–º.</p>
                </div>

                <h3>–ö–æ–≥–¥–∞ GIL –Ω–µ –º–µ—à–∞–µ—Ç? (I/O Bound)</h3>
                <p>–ü—Ä–∏ –æ–ø–µ—Ä–∞—Ü–∏—è—Ö –≤–≤–æ–¥–∞-–≤—ã–≤–æ–¥–∞ (—Å–µ—Ç—å, –¥–∏—Å–∫) GIL –æ—Ç–ø—É—Å–∫–∞–µ—Ç—Å—è.</p>
                <ul>
                    <li>–ó–∞–ø—Ä–æ—Å—ã –≤ –ë–î (PostgreSQL, Redis)</li>
                    <li>HTTP-–∑–∞–ø—Ä–æ—Å—ã</li>
                    <li>–ß—Ç–µ–Ω–∏–µ/–∑–∞–ø–∏—Å—å —Ñ–∞–π–ª–æ–≤</li>
                </ul>

                <h3>–ö–æ–≥–¥–∞ GIL –º–µ—à–∞–µ—Ç? (CPU Bound)</h3>
                <p>–¢—è–∂–µ–ª—ã–µ –≤—ã—á–∏—Å–ª–µ–Ω–∏—è –Ω–∞ —á–∏—Å—Ç–æ–º Python.</p>
                <ul>
                    <li>–û–±—Ä–∞–±–æ—Ç–∫–∞ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π</li>
                    <li>–°–ª–æ–∂–Ω–∞—è –º–∞—Ç–µ–º–∞—Ç–∏–∫–∞</li>
                    <li>–°–µ—Ä–∏–∞–ª–∏–∑–∞—Ü–∏—è –±–æ–ª—å—à–∏—Ö JSON</li>
                </ul>

                <h2>2. Memory Model & Garbage Collection</h2>
                <p>–í Python –≤—Å—ë ‚Äî –æ–±—ä–µ–∫—Ç. –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–∞–º—è—Ç—å—é –æ—Å–Ω–æ–≤–∞–Ω–æ –Ω–∞ –¥–≤—É—Ö –º–µ—Ö–∞–Ω–∏–∑–º–∞—Ö:</p>
                
                <ol>
                    <li><strong>Reference Counting (–°—á—ë—Ç—á–∏–∫ —Å—Å—ã–ª–æ–∫):</strong> –û—Å–Ω–æ–≤–Ω–æ–π –º–µ—Ö–∞–Ω–∏–∑–º. –ö–∞–∫ —Ç–æ–ª—å–∫–æ —Å—á—ë—Ç—á–∏–∫ —Å—Å—ã–ª–æ–∫ –Ω–∞ –æ–±—ä–µ–∫—Ç —Å—Ç–∞–Ω–æ–≤–∏—Ç—Å—è 0, –ø–∞–º—è—Ç—å –æ—Å–≤–æ–±–æ–∂–¥–∞–µ—Ç—Å—è –Ω–µ–º–µ–¥–ª–µ–Ω–Ω–æ.</li>
                    <li><strong>Garbage Collector (GC):</strong> –í—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω—ã–π –º–µ—Ö–∞–Ω–∏–∑–º –¥–ª—è –æ–±–Ω–∞—Ä—É–∂–µ–Ω–∏—è <em>—Ü–∏–∫–ª–∏—á–µ—Å–∫–∏—Ö —Å—Å—ã–ª–æ–∫</em>.</li>
                </ol>

<pre><code class="language-python">import sys

a = []
b = a
print(sys.getrefcount(a))  # 3 (a, b, –∏ –∞—Ä–≥—É–º–µ–Ω—Ç getrefcount)
</code></pre>

                <h2>3. Asyncio Event Loop</h2>
                <p>Asyncio ‚Äî —ç—Ç–æ –∫–æ–æ–ø–µ—Ä–∞—Ç–∏–≤–Ω–∞—è –º–Ω–æ–≥–æ–∑–∞–¥–∞—á–Ω–æ—Å—Ç—å. –û—Å–Ω–æ–≤–∞ ‚Äî Event Loop (—Ü–∏–∫–ª —Å–æ–±—ã—Ç–∏–π).</p>

                <div class="comparison-table">
                    <div class="comparison-col">
                        <h4>Sync (Blocking)</h4>
                        <p>–ö–æ–¥ –∂–¥—ë—Ç –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è –≤–≤–æ–¥–∞-–≤—ã–≤–æ–¥–∞, –±–ª–æ–∫–∏—Ä—É—è –≤–µ—Å—å –ø–æ—Ç–æ–∫.</p>
<pre><code class="language-python">import time
def task():
    time.sleep(1) # Block
    print("Done")
</code></pre>
                    </div>
                    <div class="comparison-col good">
                        <h4>Async (Non-blocking)</h4>
                        <p>Event Loop –ø–µ—Ä–µ–∫–ª—é—á–∞–µ—Ç—Å—è –Ω–∞ –¥—Ä—É–≥—É—é –∑–∞–¥–∞—á—É –≤–æ –≤—Ä–µ–º—è –æ–∂–∏–¥–∞–Ω–∏—è.</p>
<pre><code class="language-python">import asyncio
async def task():
    await asyncio.sleep(1) # Yield
    print("Done")
</code></pre>
                    </div>
                </div>

                <h2>ü™® –ü–æ–¥–≤–æ–¥–Ω—ã–µ –∫–∞–º–Ω–∏</h2>
                <div class="accordion">
                    <div class="accordion-item">
                        <div class="accordion-header">
                            <strong>1. gc.disable() –∏ Reference Counting</strong>
                        </div>
                        <div class="accordion-content">
                            <p>–í—ã–∑–æ–≤ <code>gc.disable()</code> –æ—Ç–∫–ª—é—á–∞–µ—Ç —Ç–æ–ª—å–∫–æ —Ü–∏–∫–ª–∏—á–µ—Å–∫–∏–π —Å–±–æ—Ä—â–∏–∫ –º—É—Å–æ—Ä–∞. Reference Counting –ø—Ä–æ–¥–æ–ª–∂–∞–µ—Ç —Ä–∞–±–æ—Ç–∞—Ç—å –≤—Å–µ–≥–¥–∞. –í –Ω–µ–∫–æ—Ç–æ—Ä—ã—Ö –≤—ã—Å–æ–∫–æ–Ω–∞–≥—Ä—É–∂–µ–Ω–Ω—ã—Ö –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è—Ö (–∫–∞–∫ Instagram) –æ—Ç–∫–ª—é—á–∞–ª–∏ GC –¥–ª—è —É–º–µ–Ω—å—à–µ–Ω–∏—è Copy-on-Write –ø—Ä–∏ —Ñ–æ—Ä–∫–µ –ø—Ä–æ—Ü–µ—Å—Å–æ–≤.</p>
                        </div>
                    </div>
                    <div class="accordion-item">
                        <div class="accordion-header">
                            <strong>2. Memory Leak –≤ Asyncio</strong>
                        </div>
                        <div class="accordion-content">
                            <p>–ï—Å–ª–∏ –≤—ã —Å–æ–∑–¥–∞–µ—Ç–µ Task –∏ –Ω–µ —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç–µ —Å—Å—ã–ª–∫—É –Ω–∞ –Ω–µ–≥–æ (fire-and-forget), —Å–±–æ—Ä—â–∏–∫ –º—É—Å–æ—Ä–∞ –º–æ–∂–µ—Ç —É–¥–∞–ª–∏—Ç—å –∑–∞–¥–∞—á—É –¥–æ –µ—ë –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è –≤ —Å—Ç–∞—Ä—ã—Ö –≤–µ—Ä—Å–∏—è—Ö Python. –í—Å–µ–≥–¥–∞ —Å–æ—Ö—Ä–∞–Ω—è–π—Ç–µ —Å—Å—ã–ª–∫–∏ –Ω–∞ —Ñ–æ–Ω–æ–≤—ã–µ –∑–∞–¥–∞—á–∏ (–Ω–∞–ø—Ä–∏–º–µ—Ä –≤ <code>set</code>).</p>
                        </div>
                    </div>
                </div>

                <h2>üí° –õ–∞–π—Ñ—Ö–∞–∫–∏</h2>
                <ul>
                    <li><strong>__slots__:</strong> –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ <code>__slots__</code> –≤ –∫–ª–∞—Å—Å–∞—Ö, –µ—Å–ª–∏ —Å–æ–∑–¥–∞–µ—Ç–µ –º–∏–ª–ª–∏–æ–Ω—ã —ç–∫–∑–µ–º–ø–ª—è—Ä–æ–≤. –≠—Ç–æ —ç–∫–æ–Ω–æ–º–∏—Ç –ø–∞–º—è—Ç—å, –æ—Ç–∫–∞–∑—ã–≤–∞—è—Å—å –æ—Ç <code>__dict__</code>.</li>
                    <li><strong>uvloop:</strong> –ë—ã—Å—Ç—Ä–∞—è, drop-in –∑–∞–º–µ–Ω–∞ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–æ–º—É event loop –Ω–∞ –æ—Å–Ω–æ–≤–µ libuv (–∫–∞–∫ –≤ Node.js). –ü—Ä–æ—Å—Ç–æ –¥–æ–±–∞–≤—å—Ç–µ <code>uvloop.install()</code>.</li>
                    <li><strong>orjson:</strong> –°–∞–º–∞—è –±—ã—Å—Ç—Ä–∞—è –±–∏–±–ª–∏–æ—Ç–µ–∫–∞ –¥–ª—è JSON –≤ Python. –ò—Å–ø–æ–ª—å–∑—É–µ—Ç Rust, –æ–±—Ö–æ–¥–∏—Ç –º–Ω–æ–≥–∏–µ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è GIL –ø—Ä–∏ —Å–µ—Ä–∏–∞–ª–∏–∑–∞—Ü–∏–∏.</li>
                </ul>
            </div>
        </main>
    </div>
</body>
</html>