<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>1.3 –ò–Ω–¥–µ–∫—Å—ã –∏ –ø–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫ ‚Äî ScaleTrade</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&family=JetBrains+Mono:wght@400;500&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <div class="book-layout">
        <!-- Sidebar Navigation -->
        <aside class="sidebar">
            <div class="sidebar-header">
                <a href="index.html" class="logo">
                    <div class="logo-icon">üìà</div>
                    <span>ScaleTrade</span>
                </a>
            </div>
            
            <nav class="sidebar-nav">
    <div class="nav-section">
        <div class="nav-section-title">Intro</div>
        <a href="index.html" class="nav-link">üè† –ì–ª–∞–≤–Ω–∞—è</a>
        <a href="setup.html" class="nav-link">üõ† Setup</a>
    </div>
    <div class="nav-section">
        <div class="nav-section-title">Part 0: Fundamentals</div>
        <a href="part0_internals.html" class="nav-link">0.1 Internals</a>
        <a href="part0_networking.html" class="nav-link">0.2 Networking</a>
    </div>
    <div class="nav-section">
        <div class="nav-section-title">Part 1: Postgres</div>
        <a href="part1_schema.html" class="nav-link">1.1 Schema</a>
        <a href="part1_indexes.html" class="nav-link active">1.2 Indexes</a>
        <a href="part1_transactions.html" class="nav-link">1.3 Transactions</a>
    </div>
    <div class="nav-section">
        <div class="nav-section-title">Part 2: Litestar</div>
        <a href="part2_litestar.html" class="nav-link">2.1 Framework</a>
        <a href="part2_dishka.html" class="nav-link">2.2 DI (Dishka)</a>
    </div>
    <div class="nav-section">
        <div class="nav-section-title">Part 3: Brokers</div>
        <a href="part3_redis.html" class="nav-link">3.1 Redis</a>
        <a href="part3_faststream.html" class="nav-link">3.2 FastStream</a>
    </div>
    <div class="nav-section">
        <div class="nav-section-title">Part 4: Quality</div>
        <a href="part4_testing.html" class="nav-link">4.1 Pytest</a>
        <a href="part4_resiliency.html" class="nav-link">4.2 Resilience</a>
    </div>
    <div class="nav-section">
        <div class="nav-section-title">Part 5: Observability</div>
        <a href="part5_clickhouse.html" class="nav-link">5.1 Clickhouse</a>
        <a href="part5_logging.html" class="nav-link">5.2 Structured Logs</a>
    </div>
    <div class="nav-section">
        <div class="nav-section-title">Part 6: Django</div>
        <a href="part6_django.html" class="nav-link">6.1 ORM</a>
        <a href="part6_migrations.html" class="nav-link">6.2 Migrations</a>
        <a href="part6_quality.html" class="nav-link">6.3 Quality</a>
    </div>
    <div class="nav-section">
        <div class="nav-section-title">Part 7: Microservices</div>
        <a href="part7_grpc.html" class="nav-link">7.1 gRPC</a>
        <a href="part7_graphql.html" class="nav-link">7.2 GraphQL</a>
        <a href="part7_federation.html" class="nav-link">7.3 Federation</a>
    </div>
    <div class="nav-section">
        <div class="nav-section-title">Part 8: Async</div>
        <a href="part8_asyncio.html" class="nav-link">8.1 Asyncio</a>
        <a href="part8_celery.html" class="nav-link">8.2 Celery</a>
        <a href="part8_dramatiq.html" class="nav-link">8.3 Dramatiq</a>
    </div>
    <div class="nav-section">
        <div class="nav-section-title">Part 9: API</div>
        <a href="part9_restdesign.html" class="nav-link">9.1 REST Design</a>
        <a href="part9_idempotency.html" class="nav-link">9.2 Idempotency</a>
        <a href="part9_openapi.html" class="nav-link">9.3 OpenAPI</a>
    </div>
    <div class="nav-section">
        <div class="nav-section-title">Part 10: Culture</div>
        <a href="part10_git.html" class="nav-link">10.1 Git</a>
        <a href="part10_commits.html" class="nav-link">10.2 Commits</a>
        <a href="part10_codereview.html" class="nav-link">10.3 Post-Review</a>
    </div>
    <div class="nav-section">
        <div class="nav-section-title">Part 11: Security</div>
        <a href="part11_oauth.html" class="nav-link">11.1 OAuth2</a>
        <a href="part11_vault.html" class="nav-link">11.2 Vault</a>
        <a href="part11_owasp.html" class="nav-link">11.3 OWASP</a>
    </div>
    <div class="nav-section">
        <div class="nav-section-title">Part 12: Kubernetes</div>
        <a href="part12_kubernetes.html" class="nav-link">12.1 K8s Basics</a>
    </div>
    <div class="nav-section">
        <div class="nav-section-title">Part 13: High Load</div>
        <a href="part13_profiling.html" class="nav-link">13.1 Profiling</a>
        <a href="part13_caching.html" class="nav-link">13.2 Caching</a>
        <a href="part13_loadbalancing.html" class="nav-link">13.3 Load Balancing</a>
    </div>
    <div class="nav-section">
        <div class="nav-section-title">Part 14: ML Ops</div>
        <a href="part14_mlflow.html" class="nav-link">14.1 MLflow</a>
        <a href="part14_embeddings.html" class="nav-link">14.2 Embeddings</a>
        <a href="part14_llm.html" class="nav-link">14.3 LLM</a>
    </div>
    <div class="nav-section">
        <div class="nav-section-title">Part 15: Debugging</div>
        <a href="part15_debugging.html" class="nav-link">15.1 Debugging</a>
        <a href="part15_postmortem.html" class="nav-link">15.2 Postmortem</a>
        <a href="part15_chaos.html" class="nav-link">15.3 Chaos Eng</a>
    </div>
    <div class="nav-section">
        <div class="nav-section-title">Part 16: DB Advanced</div>
        <a href="part16_indexes.html" class="nav-link">16.1 Indexes Deep</a>
        <a href="part16_isolation.html" class="nav-link">16.2 Isolation</a>
        <a href="part16_sharding.html" class="nav-link">16.3 Sharding</a>
    </div>
    <div class="nav-section">
        <div class="nav-section-title">Part 17: System Design</div>
        <a href="part17_circuit.html" class="nav-link">17.1 Circuit Breaker</a>
        <a href="part17_ratelimit.html" class="nav-link">17.2 Rate Limit</a>
        <a href="part17_distlock.html" class="nav-link">17.3 Dist Lock</a>
    </div>
    <div class="nav-section">
        <div class="nav-section-title">Part 18: Soft Skills</div>
        <a href="part18_estimation.html" class="nav-link">18.1 Estimation</a>
        <a href="part18_burnout.html" class="nav-link">18.2 Burnout</a>
        <a href="part18_interview.html" class="nav-link">18.3 Interview</a>
    </div>
</nav>
        </aside>

        <!-- Main Content -->
        <main class="main-content">
            <header class="header">
                <div class="breadcrumb">
                    <a href="index.html">ScaleTrade</a>
                    <span>/</span>
                    <span>–ß–∞—Å—Ç—å 1</span>
                    <span>/</span>
                    <span>1.3 –ò–Ω–¥–µ–∫—Å—ã</span>
                </div>
            </header>

            <div class="page-content">
                <h1>–ú–æ–¥—É–ª—å 1.3: –ò–Ω–¥–µ–∫—Å—ã –∏ –ø–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫ –∑–∞–ø—Ä–æ—Å–æ–≤</h1>
                <p class="lead">
                    –ò–Ω–¥–µ–∫—Å—ã ‚Äî —ç—Ç–æ –Ω–µ –º–∞–≥–∏—è, –∞ —Å—Ç—Ä—É–∫—Ç—É—Ä—ã –¥–∞–Ω–Ω—ã—Ö. –ü–æ–Ω–∏–º–∞—è –∏—Ö —É—Å—Ç—Ä–æ–π—Å—Ç–≤–æ, 
                    —Ç—ã —Å–º–æ–∂–µ—à—å –æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞—Ç—å –∑–∞–ø—Ä–æ—Å—ã –Ω–∞ –º–∏–ª–ª–∏–æ–Ω–∞—Ö –∑–∞–ø–∏—Å–µ–π.
                </p>

                <h2>–¢–∏–ø—ã –∏–Ω–¥–µ–∫—Å–æ–≤ –≤ PostgreSQL</h2>
                
                <table>
                    <thead>
                        <tr>
                            <th>–¢–∏–ø</th>
                            <th>–°—Ç—Ä—É–∫—Ç—É—Ä–∞</th>
                            <th>–ö–æ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td><strong>B-Tree</strong></td>
                            <td>–°–±–∞–ª–∞–Ω—Å–∏—Ä–æ–≤–∞–Ω–Ω–æ–µ –¥–µ—Ä–µ–≤–æ</td>
                            <td>–ü–æ —É–º–æ–ª—á–∞–Ω–∏—é. –†–∞–≤–µ–Ω—Å—Ç–≤–æ, –¥–∏–∞–ø–∞–∑–æ–Ω—ã, —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞</td>
                        </tr>
                        <tr>
                            <td><strong>Hash</strong></td>
                            <td>–•—ç—à-—Ç–∞–±–ª–∏—Ü–∞</td>
                            <td>–¢–æ–ª—å–∫–æ —Ä–∞–≤–µ–Ω—Å—Ç–≤–æ (=). –†–µ–¥–∫–æ –Ω—É–∂–µ–Ω</td>
                        </tr>
                        <tr>
                            <td><strong>GIN</strong></td>
                            <td>Generalized Inverted</td>
                            <td>JSONB, –º–∞—Å—Å–∏–≤—ã, –ø–æ–ª–Ω–æ—Ç–µ–∫—Å—Ç–æ–≤—ã–π –ø–æ–∏—Å–∫</td>
                        </tr>
                        <tr>
                            <td><strong>GiST</strong></td>
                            <td>Generalized Search Tree</td>
                            <td>–ì–µ–æ–º–µ—Ç—Ä–∏—è, –¥–∏–∞–ø–∞–∑–æ–Ω—ã, –ø–æ–ª–Ω–æ—Ç–µ–∫—Å—Ç–æ–≤—ã–π –ø–æ–∏—Å–∫</td>
                        </tr>
                        <tr>
                            <td><strong>BRIN</strong></td>
                            <td>Block Range Index</td>
                            <td>–û–≥—Ä–æ–º–Ω—ã–µ —Ç–∞–±–ª–∏—Ü—ã —Å –µ—Å—Ç–µ—Å—Ç–≤–µ–Ω–Ω–æ–π —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–æ–π</td>
                        </tr>
                    </tbody>
                </table>

                <h2>–°–µ–ª–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç—å (Selectivity) –∏ –ö–∞—Ä–¥–∏–Ω–∞–ª—å–Ω–æ—Å—Ç—å</h2>
                <p>
                    –ü–æ—á–µ–º—É Postgres –∏–Ω–æ–≥–¥–∞ –∏–≥–Ω–æ—Ä–∏—Ä—É–µ—Ç —Ç–≤–æ–π –∏–Ω–¥–µ–∫—Å –∏ –¥–µ–ª–∞–µ—Ç <code>Seq Scan</code>? 
                    –í—Å—ë –¥–µ–ª–æ –≤ —Å–µ–ª–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏.
                </p>
                <div class="info-box tip">
                    <div class="info-box-title">üî¢ –ú–∞—Ç–µ–º–∞—Ç–∏–∫–∞ –ø–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫–∞</div>
                    <p>
                        <strong>–ö–∞—Ä–¥–∏–Ω–∞–ª—å–Ω–æ—Å—Ç—å</strong> ‚Äî –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —É–Ω–∏–∫–∞–ª—å–Ω—ã—Ö –∑–Ω–∞—á–µ–Ω–∏–π –≤ –∫–æ–ª–æ–Ω–∫–µ.
                        <br>
                        <strong>–°–µ–ª–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç—å</strong> ‚Äî –¥–æ–ª—è —Å—Ç—Ä–æ–∫, –∫–æ—Ç–æ—Ä—É—é –æ—Ç—Ñ–∏–ª—å—Ç—Ä–æ–≤—ã–≤–∞–µ—Ç —É—Å–ª–æ–≤–∏–µ.
                    </p>
                    <p>
                        –ï—Å–ª–∏ –∑–∞–ø—Ä–æ—Å –¥–æ–ª–∂–µ–Ω –≤–µ—Ä–Ω—É—Ç—å <strong>–±–æ–ª–µ–µ 5-10%</strong> —Å—Ç—Ä–æ–∫ —Ç–∞–±–ª–∏—Ü—ã, 
                        Postgres —Ä–µ—à–∏—Ç, —á—Ç–æ –¥–µ—à–µ–≤–ª–µ –ø—Ä–æ—á–∏—Ç–∞—Ç—å –≤—Å—é —Ç–∞–±–ª–∏—Ü—É –ø–æ–¥—Ä—è–¥ (Sequential Read), 
                        —á–µ–º –ø—Ä—ã–≥–∞—Ç—å –ø–æ –¥–∏—Å–∫—É –∑–∞ –∫–∞–∂–¥–æ–π —Å—Ç—Ä–æ–∫–æ–π —á–µ—Ä–µ–∑ –∏–Ω–¥–µ–∫—Å (Random Read).
                    </p>
                </div>
                <p>
                    –ü—Ä–∏–º–µ—Ä: –∏–Ω–¥–µ–∫—Å –Ω–∞ –ø–æ–ª–µ <code>gender</code> (–≤—Å–µ–≥–æ 2 –∑–Ω–∞—á–µ–Ω–∏—è) –ø–æ—á—Ç–∏ –±–µ—Å–ø–æ–ª–µ–∑–µ–Ω –¥–ª—è –ø–æ–∏—Å–∫–∞ 
                    <code>WHERE gender = 'male'</code> (–≤–µ—Ä–Ω–µ—Ç 50% —Ç–∞–±–ª–∏—Ü—ã). 
                    –ù–æ –ø–æ–ª–µ–∑–µ–Ω –¥–ª—è —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–∏ –∏–ª–∏ –µ—Å–ª–∏ –¥–∞–Ω–Ω—ã—Ö –æ—á–µ–Ω—å –º–∞–ª–æ.
                </p>

                <h2>B-Tree: —Ä–∞–±–æ—á–∞—è –ª–æ—à–∞–¥–∫–∞</h2>
                
                <p>99% —Ç–≤–æ–∏—Ö –∏–Ω–¥–µ–∫—Å–æ–≤ –±—É–¥—É—Ç B-Tree. –í–∞–∂–Ω–æ –ø–æ–Ω–∏–º–∞—Ç—å, –∫–æ–≥–¥–∞ –æ–Ω —Ä–∞–±–æ—Ç–∞–µ—Ç:</p>

<pre><code><span class="comment">-- B-Tree —Ä–∞–±–æ—Ç–∞–µ—Ç –¥–ª—è:</span>
<span class="keyword">WHERE</span> column = value           <span class="comment">-- –†–∞–≤–µ–Ω—Å—Ç–≤–æ</span>
<span class="keyword">WHERE</span> column > value           <span class="comment">-- –î–∏–∞–ø–∞–∑–æ–Ω</span>
<span class="keyword">WHERE</span> column <span class="keyword">BETWEEN</span> a <span class="keyword">AND</span> b   <span class="comment">-- –î–∏–∞–ø–∞–∑–æ–Ω</span>
<span class="keyword">WHERE</span> column <span class="keyword">IN</span> (a, b, c)      <span class="comment">-- –ú–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω–æ–µ —Ä–∞–≤–µ–Ω—Å—Ç–≤–æ</span>
<span class="keyword">WHERE</span> column <span class="keyword">LIKE</span> 'prefix%'    <span class="comment">-- –ü—Ä–µ—Ñ–∏–∫—Å–Ω—ã–π –ø–æ–∏—Å–∫</span>
<span class="keyword">ORDER BY</span> column               <span class="comment">-- –°–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞</span>

<span class="comment">-- B-Tree –ù–ï —Ä–∞–±–æ—Ç–∞–µ—Ç –¥–ª—è:</span>
<span class="keyword">WHERE</span> column <span class="keyword">LIKE</span> '%suffix'    <span class="comment">-- –°—É—Ñ—Ñ–∏–∫—Å–Ω—ã–π –ø–æ–∏—Å–∫</span>
<span class="keyword">WHERE</span> lower(column) = 'test'  <span class="comment">-- –§—É–Ω–∫—Ü–∏—è –Ω–∞–¥ –∫–æ–ª–æ–Ω–∫–æ–π</span>
<span class="keyword">WHERE</span> column::text = 'test'   <span class="comment">-- –ü—Ä–∏–≤–µ–¥–µ–Ω–∏–µ —Ç–∏–ø–∞</span></code></pre>

                <h3>–°–æ—Å—Ç–∞–≤–Ω—ã–µ –∏–Ω–¥–µ–∫—Å—ã: –ø–æ—Ä—è–¥–æ–∫ –∏–º–µ–µ—Ç –∑–Ω–∞—á–µ–Ω–∏–µ</h3>

<pre><code><span class="comment">-- –ò–Ω–¥–µ–∫—Å –Ω–∞ (user_id, created_at)</span>
<span class="keyword">CREATE INDEX</span> idx_orders_user_created <span class="keyword">ON</span> orders (user_id, created_at <span class="keyword">DESC</span>);

<span class="comment">-- ‚úÖ –†–∞–±–æ—Ç–∞–µ—Ç:</span>
<span class="keyword">WHERE</span> user_id = <span class="number">1</span>                              <span class="comment">-- –ü–µ—Ä–≤–∞—è –∫–æ–ª–æ–Ω–∫–∞</span>
<span class="keyword">WHERE</span> user_id = <span class="number">1</span> <span class="keyword">AND</span> created_at > '2024-01-01' <span class="comment">-- –û–±–µ –∫–æ–ª–æ–Ω–∫–∏</span>
<span class="keyword">WHERE</span> user_id = <span class="number">1</span> <span class="keyword">ORDER BY</span> created_at <span class="keyword">DESC</span>     <span class="comment">-- –ö–æ–ª–æ–Ω–∫–∞ + —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞</span>

<span class="comment">-- ‚ùå –ù–ï —Ä–∞–±–æ—Ç–∞–µ—Ç:</span>
<span class="keyword">WHERE</span> created_at > '2024-01-01'                 <span class="comment">-- –¢–æ–ª—å–∫–æ –≤—Ç–æ—Ä–∞—è –∫–æ–ª–æ–Ω–∫–∞!</span>
<span class="keyword">ORDER BY</span> user_id, created_at <span class="keyword">ASC</span>               <span class="comment">-- –î—Ä—É–≥–æ–π –ø–æ—Ä—è–¥–æ–∫ —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–∏</span></code></pre>

                <div class="info-box tip">
                    <div class="info-box-title">üí° –ü—Ä–∞–≤–∏–ª–æ —Å–æ—Å—Ç–∞–≤–Ω—ã—Ö –∏–Ω–¥–µ–∫—Å–æ–≤</div>
                    <p>
                        –ò–Ω–¥–µ–∫—Å —Ä–∞–±–æ—Ç–∞–µ—Ç —Å–ª–µ–≤–∞ –Ω–∞–ø—Ä–∞–≤–æ. –ï—Å–ª–∏ –ø–µ—Ä–≤–∞—è –∫–æ–ª–æ–Ω–∫–∞ –Ω–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –≤ WHERE ‚Äî 
                        –∏–Ω–¥–µ–∫—Å –±–µ—Å–ø–æ–ª–µ–∑–µ–Ω (–∫—Ä–æ–º–µ Index Only Scan).
                    </p>
                </div>

                <h2>–ß–∞—Å—Ç–∏—á–Ω—ã–µ –∏–Ω–¥–µ–∫—Å—ã (Partial Index)</h2>
                
                <p>
                    –ó–∞—á–µ–º –∏–Ω–¥–µ–∫—Å–∏—Ä–æ–≤–∞—Ç—å –º–∏–ª–ª–∏–æ–Ω—ã –∑–∞–∫—Ä—ã—Ç—ã—Ö –æ—Ä–¥–µ—Ä–æ–≤, –µ—Å–ª–∏ –º—ã –∏—â–µ–º —Ç–æ–ª—å–∫–æ –∞–∫—Ç–∏–≤–Ω—ã–µ?
                </p>

<pre><code><span class="comment">-- –ò–Ω–¥–µ–∫—Å –¢–û–õ–¨–ö–û –¥–ª—è –∞–∫—Ç–∏–≤–Ω—ã—Ö –æ—Ä–¥–µ—Ä–æ–≤</span>
<span class="keyword">CREATE INDEX</span> idx_orders_pending 
<span class="keyword">ON</span> orders (user_id, created_at)
<span class="keyword">WHERE</span> status = 'pending';

<span class="comment">-- –†–∞–∑–º–µ—Ä: ~0.1% –æ—Ç –ø–æ–ª–Ω–æ–≥–æ –∏–Ω–¥–µ–∫—Å–∞</span>
<span class="comment">-- –°–∫–æ—Ä–æ—Å—Ç—å: –≤ 100+ —Ä–∞–∑ –±—ã—Å—Ç—Ä–µ–µ –Ω–∞ –ø–æ–∏—Å–∫–µ –∞–∫—Ç–∏–≤–Ω—ã—Ö</span>

<span class="comment">-- –î—Ä—É–≥–∏–µ –ø—Ä–∏–º–µ—Ä—ã:</span>
<span class="keyword">CREATE INDEX</span> idx_users_active <span class="keyword">ON</span> users (email) <span class="keyword">WHERE</span> deleted_at <span class="keyword">IS NULL</span>;
<span class="keyword">CREATE INDEX</span> idx_tasks_unprocessed <span class="keyword">ON</span> tasks (priority) <span class="keyword">WHERE</span> processed = <span class="keyword">false</span>;</code></pre>

                <h3>–í–∞–∂–Ω–æ: –∑–∞–ø—Ä–æ—Å –¥–æ–ª–∂–µ–Ω —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–æ–≤–∞—Ç—å —É—Å–ª–æ–≤–∏—é</h3>

<pre><code><span class="comment">-- ‚úÖ –ò–Ω–¥–µ–∫—Å –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è:</span>
<span class="keyword">SELECT</span> * <span class="keyword">FROM</span> orders 
<span class="keyword">WHERE</span> user_id = <span class="number">1</span> <span class="keyword">AND</span> status = 'pending';

<span class="comment">-- ‚ùå –ò–Ω–¥–µ–∫—Å –ù–ï –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è (status –æ—Ç–ª–∏—á–∞–µ—Ç—Å—è):</span>
<span class="keyword">SELECT</span> * <span class="keyword">FROM</span> orders 
<span class="keyword">WHERE</span> user_id = <span class="number">1</span> <span class="keyword">AND</span> status = 'filled';</code></pre>

                <h2>–ü–æ–∫—Ä—ã–≤–∞—é—â–∏–µ –∏–Ω–¥–µ–∫—Å—ã (Covering Index / INCLUDE)</h2>
                
                <p>
                    <strong>Index Only Scan</strong> ‚Äî –∫–æ–≥–¥–∞ –≤—Å–µ –¥–∞–Ω–Ω—ã–µ –µ—Å—Ç—å –≤ –∏–Ω–¥–µ–∫—Å–µ –∏ –Ω–µ –Ω—É–∂–Ω–æ —á–∏—Ç–∞—Ç—å —Ç–∞–±–ª–∏—Ü—É.
                </p>

<pre><code><span class="comment">-- –ó–∞–ø—Ä–æ—Å: –ø–æ–ª—É—á–∏—Ç—å —Ü–µ–Ω—É –ø–æ—Å–ª–µ–¥–Ω–∏—Ö –æ—Ä–¥–µ—Ä–æ–≤ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è</span>
<span class="keyword">SELECT</span> price, created_at 
<span class="keyword">FROM</span> orders 
<span class="keyword">WHERE</span> user_id = <span class="number">1</span> 
<span class="keyword">ORDER BY</span> created_at <span class="keyword">DESC</span> 
<span class="keyword">LIMIT</span> <span class="number">10</span>;

<span class="comment">-- –û–±—ã—á–Ω—ã–π –∏–Ω–¥–µ–∫—Å: Index Scan + Heap Fetch (—á–∏—Ç–∞–µ–º —Ç–∞–±–ª–∏—Ü—É)</span>
<span class="keyword">CREATE INDEX</span> idx_v1 <span class="keyword">ON</span> orders (user_id, created_at <span class="keyword">DESC</span>);

<span class="comment">-- –ü–æ–∫—Ä—ã–≤–∞—é—â–∏–π –∏–Ω–¥–µ–∫—Å: Index Only Scan (—Ç–∞–±–ª–∏—Ü—É –ù–ï —á–∏—Ç–∞–µ–º!)</span>
<span class="keyword">CREATE INDEX</span> idx_v2 <span class="keyword">ON</span> orders (user_id, created_at <span class="keyword">DESC</span>) 
<span class="keyword">INCLUDE</span> (price);

<span class="comment">-- INCLUDE –∫–æ–ª–æ–Ω–∫–∏:</span>
<span class="comment">-- - –•—Ä–∞–Ω—è—Ç—Å—è –≤ –ª–∏—Å—Ç—å—è—Ö B-Tree</span>
<span class="comment">-- - –ù–ï –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è –¥–ª—è –ø–æ–∏—Å–∫–∞/—Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–∏</span>
<span class="comment">-- - –ü–æ–∑–≤–æ–ª—è—é—Ç –∏–∑–±–µ–∂–∞—Ç—å —á—Ç–µ–Ω–∏—è —Ç–∞–±–ª–∏—Ü—ã</span></code></pre>

                <div class="info-box warning">
                    <div class="info-box-title">‚ö†Ô∏è –ö–æ–≥–¥–∞ Index Only Scan –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç</div>
                    <p>
                        –ï—Å–ª–∏ –≤ —Ç–∞–±–ª–∏—Ü–µ –º–Ω–æ–≥–æ "–º—ë—Ä—Ç–≤—ã—Ö" —Å—Ç—Ä–æ–∫ (–ø–æ—Å–ª–µ UPDATE/DELETE), 
                        PostgreSQL –≤—Å—ë —Ä–∞–≤–Ω–æ –ø–æ–π–¥—ë—Ç –≤ —Ç–∞–±–ª–∏—Ü—É –ø—Ä–æ–≤–µ—Ä—è—Ç—å visibility. 
                        –†–µ—à–µ–Ω–∏–µ: —Ä–µ–≥—É–ª—è—Ä–Ω—ã–π <code>VACUUM</code>.
                    </p>
                </div>

                <h2>GIN –∏–Ω–¥–µ–∫—Å—ã –¥–ª—è JSONB</h2>
                
                <p>–ï—Å–ª–∏ —Ö—Ä–∞–Ω–∏–º –¥–∞–Ω–Ω—ã–µ –≤ JSONB, –Ω—É–∂–µ–Ω GIN –∏–Ω–¥–µ–∫—Å:</p>

<pre><code><span class="comment">-- –¢–∞–±–ª–∏—Ü–∞ —Å –º–µ—Ç–∞–¥–∞–Ω–Ω—ã–º–∏ –≤ JSONB</span>
<span class="keyword">CREATE TABLE</span> orders (
    id BIGINT <span class="keyword">PRIMARY KEY</span>,
    metadata JSONB
);

<span class="comment">-- –ü—Ä–∏–º–µ—Ä –¥–∞–Ω–Ω—ã—Ö</span>
{
    "source": "mobile_app",
    "tags": ["vip", "urgent"],
    "client": {"type": "corporate", "tier": 1}
}

<span class="comment">-- GIN –∏–Ω–¥–µ–∫—Å –Ω–∞ –≤—Å—ë —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ</span>
<span class="keyword">CREATE INDEX</span> idx_orders_metadata <span class="keyword">ON</span> orders <span class="keyword">USING</span> gin (metadata);

<span class="comment">-- –ó–∞–ø—Ä–æ—Å—ã, –∏—Å–ø–æ–ª—å–∑—É—é—â–∏–µ GIN:</span>
<span class="keyword">SELECT</span> * <span class="keyword">FROM</span> orders <span class="keyword">WHERE</span> metadata @> '{"source": "mobile_app"}';
<span class="keyword">SELECT</span> * <span class="keyword">FROM</span> orders <span class="keyword">WHERE</span> metadata ? 'tags';
<span class="keyword">SELECT</span> * <span class="keyword">FROM</span> orders <span class="keyword">WHERE</span> metadata->'tags' ? 'vip';

<span class="comment">-- GIN –¥–ª—è –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ –ø—É—Ç–∏ (–º–µ–Ω—å—à–µ —Ä–∞–∑–º–µ—Ä)</span>
<span class="keyword">CREATE INDEX</span> idx_orders_source <span class="keyword">ON</span> orders <span class="keyword">USING</span> gin ((metadata->'source'));</code></pre>

                <h2>EXPLAIN ANALYZE: —á–∏—Ç–∞–µ–º –ø–ª–∞–Ω –∑–∞–ø—Ä–æ—Å–∞</h2>
                
                <p>
                    <code>EXPLAIN (ANALYZE, BUFFERS)</code> ‚Äî –≥–ª–∞–≤–Ω—ã–π –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏. 
                    –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç, –∫–∞–∫ PostgreSQL –≤—ã–ø–æ–ª–Ω—è–µ—Ç –∑–∞–ø—Ä–æ—Å.
                </p>

<pre><code><span class="keyword">EXPLAIN</span> (<span class="keyword">ANALYZE</span>, <span class="keyword">BUFFERS</span>, <span class="keyword">FORMAT TEXT</span>)
<span class="keyword">SELECT</span> * <span class="keyword">FROM</span> orders 
<span class="keyword">WHERE</span> user_id = <span class="number">1</span> <span class="keyword">AND</span> status = 'pending'
<span class="keyword">ORDER BY</span> created_at <span class="keyword">DESC</span> 
<span class="keyword">LIMIT</span> <span class="number">10</span>;</code></pre>

                <h3>–¢–∏–ø—ã —Å–∫–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏—è</h3>

                <table>
                    <thead>
                        <tr>
                            <th>–¢–∏–ø</th>
                            <th>–ß—Ç–æ –∑–Ω–∞—á–∏—Ç</th>
                            <th>–•–æ—Ä–æ—à–æ/–ü–ª–æ—Ö–æ</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td><strong>Seq Scan</strong></td>
                            <td>–ü–æ–ª–Ω–æ–µ —Å–∫–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ —Ç–∞–±–ª–∏—Ü—ã</td>
                            <td>‚ùå –ü–ª–æ—Ö–æ –Ω–∞ –±–æ–ª—å—à–∏—Ö —Ç–∞–±–ª–∏—Ü–∞—Ö</td>
                        </tr>
                        <tr>
                            <td><strong>Index Scan</strong></td>
                            <td>–ò–Ω–¥–µ–∫—Å + —á—Ç–µ–Ω–∏–µ —Ç–∞–±–ª–∏—Ü—ã</td>
                            <td>‚úÖ –•–æ—Ä–æ—à–æ</td>
                        </tr>
                        <tr>
                            <td><strong>Index Only Scan</strong></td>
                            <td>–¢–æ–ª—å–∫–æ –∏–Ω–¥–µ–∫—Å (–ø–æ–∫—Ä—ã–≤–∞—é—â–∏–π)</td>
                            <td>‚úÖ‚úÖ –û—Ç–ª–∏—á–Ω–æ</td>
                        </tr>
                        <tr>
                            <td><strong>Bitmap Index Scan</strong></td>
                            <td>–ü–æ—Å—Ç—Ä–æ–µ–Ω–∏–µ –±–∏—Ç–æ–≤–æ–π –∫–∞—Ä—Ç—ã –ø–æ –∏–Ω–¥–µ–∫—Å—É</td>
                            <td>‚úÖ –•–æ—Ä–æ—à–æ –¥–ª—è –º–Ω–æ–∂–µ—Å—Ç–≤–∞ —Å—Ç—Ä–æ–∫</td>
                        </tr>
                    </tbody>
                </table>

                <h3>–ü—Ä–∏–º–µ—Ä –∞–Ω–∞–ª–∏–∑–∞</h3>

<pre><code><span class="comment">-- –†–µ–∑—É–ª—å—Ç–∞—Ç EXPLAIN ANALYZE:</span>
Limit  (cost=0.43..12.87 rows=10 width=120) (actual time=0.023..0.045 rows=10 loops=1)
  Buffers: shared hit=4
  ->  Index Scan using idx_orders_user_created on orders  
        (cost=0.43..1234.56 rows=1000 width=120) 
        (actual time=0.022..0.042 rows=10 loops=1)
        Index Cond: (user_id = 1)
        Filter: (status = 'pending')
        Rows Removed by Filter: 5
        Buffers: shared hit=4
Planning Time: 0.123 ms
Execution Time: 0.067 ms

<span class="comment">-- –ß—Ç–æ –≤–∏–¥–∏–º:</span>
<span class="comment">-- 1. Index Scan ‚Äî –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –∏–Ω–¥–µ–∫—Å ‚úÖ</span>
<span class="comment">-- 2. Buffers: shared hit=4 ‚Äî –≤—Å—ë –∏–∑ –∫–µ—à–∞, 0 —á—Ç–µ–Ω–∏–π —Å –¥–∏—Å–∫–∞ ‚úÖ</span>
<span class="comment">-- 3. Rows Removed by Filter: 5 ‚Äî —Ñ–∏–ª—å—Ç—Ä status —É–±—Ä–∞–ª 5 —Å—Ç—Ä–æ–∫</span>
<span class="comment">-- 4. Execution Time: 0.067 ms ‚Äî –æ—á–µ–Ω—å –±—ã—Å—Ç—Ä–æ ‚úÖ</span></code></pre>

                <div class="info-box danger">
                    <div class="info-box-title">üö® –ö—Ä–∞—Å–Ω—ã–µ —Ñ–ª–∞–≥–∏ –≤ EXPLAIN</div>
                    <ul>
                        <li><strong>Seq Scan</strong> –Ω–∞ –±–æ–ª—å—à–æ–π —Ç–∞–±–ª–∏—Ü–µ</li>
                        <li><strong>Buffers: shared read=10000</strong> ‚Äî –º–Ω–æ–≥–æ —á—Ç–µ–Ω–∏–π —Å –¥–∏—Å–∫–∞</li>
                        <li><strong>Rows Removed by Filter: 1000000</strong> ‚Äî —Ñ–∏–ª—å—Ç—Ä –Ω–µ—ç—Ñ—Ñ–µ–∫—Ç–∏–≤–µ–Ω</li>
                        <li><strong>Sort Method: external merge</strong> ‚Äî —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞ –Ω–∞ –¥–∏—Å–∫–µ</li>
                    </ul>
                </div>

                <h2>–ü—Ä–∞–∫—Ç–∏—á–µ—Å–∫–∏–µ –∫–µ–π—Å—ã –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏</h2>

                <h3>–ö–µ–π—Å 1: –ü–∞–≥–∏–Ω–∞—Ü–∏—è –Ω–∞ –º–∏–ª–ª–∏–æ–Ω–∞—Ö –∑–∞–ø–∏—Å–µ–π</h3>

                <div class="comparison-table">
                    <div class="comparison-col bad">
                        <h4>‚ùå OFFSET (–º–µ–¥–ª–µ–Ω–Ω–æ)</h4>
<pre><code><span class="keyword">SELECT</span> * <span class="keyword">FROM</span> orders
<span class="keyword">WHERE</span> user_id = <span class="number">1</span>
<span class="keyword">ORDER BY</span> created_at <span class="keyword">DESC</span>
<span class="keyword">LIMIT</span> <span class="number">20</span> <span class="keyword">OFFSET</span> <span class="number">100000</span>;

<span class="comment">-- –ß–∏—Ç–∞–µ—Ç 100020 —Å—Ç—Ä–æ–∫,</span>
<span class="comment">-- –æ—Ç–±—Ä–∞—Å—ã–≤–∞–µ—Ç 100000</span></code></pre>
                    </div>
                    <div class="comparison-col good">
                        <h4>‚úÖ Keyset (cursor)</h4>
<pre><code><span class="keyword">SELECT</span> * <span class="keyword">FROM</span> orders
<span class="keyword">WHERE</span> user_id = <span class="number">1</span>
  <span class="keyword">AND</span> created_at < :last_seen
<span class="keyword">ORDER BY</span> created_at <span class="keyword">DESC</span>
<span class="keyword">LIMIT</span> <span class="number">20</span>;

<span class="comment">-- –ß–∏—Ç–∞–µ—Ç —Ä–æ–≤–Ω–æ 20 —Å—Ç—Ä–æ–∫!</span></code></pre>
                    </div>
                </div>

                <h3>–ö–µ–π—Å 2: COUNT(*) –Ω–∞ –±–æ–ª—å—à–∏—Ö —Ç–∞–±–ª–∏—Ü–∞—Ö</h3>

<pre><code><span class="comment">-- ‚ùå –ú–µ–¥–ª–µ–Ω–Ω–æ: –ø–æ–ª–Ω–æ–µ —Å–∫–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ</span>
<span class="keyword">SELECT</span> COUNT(*) <span class="keyword">FROM</span> orders <span class="keyword">WHERE</span> user_id = <span class="number">1</span>;

<span class="comment">-- ‚úÖ –ü—Ä–∏–±–ª–∏–∑–∏—Ç–µ–ª—å–Ω—ã–π –ø–æ–¥—Å—á—ë—Ç (–º–≥–Ω–æ–≤–µ–Ω–Ω–æ)</span>
<span class="keyword">SELECT</span> reltuples::bigint <span class="keyword">AS</span> estimate
<span class="keyword">FROM</span> pg_class
<span class="keyword">WHERE</span> relname = 'orders';

<span class="comment">-- ‚úÖ –¢–æ—á–Ω—ã–π –ø–æ–¥—Å—á—ë—Ç —Å –∫–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ–º –≤ Redis</span>
<span class="comment">-- –û–±–Ω–æ–≤–ª—è–µ–º —Å—á—ë—Ç—á–∏–∫ –ø—Ä–∏ INSERT/DELETE —á–µ—Ä–µ–∑ —Ç—Ä–∏–≥–≥–µ—Ä</span></code></pre>

                <h3>–ö–µ–π—Å 3: –§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–π –∏–Ω–¥–µ–∫—Å</h3>

<pre><code><span class="comment">-- –ó–∞–ø—Ä–æ—Å: –ø–æ–∏—Å–∫ –ø–æ email –±–µ–∑ —É—á—ë—Ç–∞ —Ä–µ–≥–∏—Å—Ç—Ä–∞</span>
<span class="keyword">SELECT</span> * <span class="keyword">FROM</span> users <span class="keyword">WHERE</span> lower(email) = 'test@example.com';

<span class="comment">-- –û–±—ã—á–Ω—ã–π –∏–Ω–¥–µ–∫—Å –Ω–∞ email –ù–ï –ø–æ–º–æ–∂–µ—Ç!</span>

<span class="comment">-- ‚úÖ –§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–π –∏–Ω–¥–µ–∫—Å</span>
<span class="keyword">CREATE INDEX</span> idx_users_email_lower <span class="keyword">ON</span> users (lower(email));

<span class="comment">-- –¢–µ–ø–µ—Ä—å –∑–∞–ø—Ä–æ—Å –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –∏–Ω–¥–µ–∫—Å</span></code></pre>

                <h2>–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∏–Ω–¥–µ–∫—Å–æ–≤</h2>

<pre><code><span class="comment">-- –ù–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ –∏–Ω–¥–µ–∫—Å—ã (–∫–∞–Ω–¥–∏–¥–∞—Ç—ã –Ω–∞ —É–¥–∞–ª–µ–Ω–∏–µ)</span>
<span class="keyword">SELECT</span> 
    schemaname || '.' || relname <span class="keyword">AS</span> table,
    indexrelname <span class="keyword">AS</span> index,
    pg_size_pretty(pg_relation_size(indexrelid)) <span class="keyword">AS</span> size,
    idx_scan <span class="keyword">AS</span> scans
<span class="keyword">FROM</span> pg_stat_user_indexes
<span class="keyword">WHERE</span> idx_scan = <span class="number">0</span>
<span class="keyword">ORDER BY</span> pg_relation_size(indexrelid) <span class="keyword">DESC</span>;

<span class="comment">-- –î—É–±–ª–∏–∫–∞—Ç—ã –∏–Ω–¥–µ–∫—Å–æ–≤</span>
<span class="keyword">SELECT</span> 
    pg_size_pretty(sum(pg_relation_size(idx))::bigint) <span class="keyword">AS</span> size,
    (array_agg(idx))[<span class="number">1</span>] <span class="keyword">AS</span> idx1, 
    (array_agg(idx))[<span class="number">2</span>] <span class="keyword">AS</span> idx2
<span class="keyword">FROM</span> (
    <span class="keyword">SELECT</span> indexrelid::regclass <span class="keyword">AS</span> idx, 
           (indrelid::text || E'\n' || indclass::text || E'\n' || 
            indkey::text || E'\n' || coalesce(indexprs::text, '') || 
            E'\n' || coalesce(indpred::text, '')) <span class="keyword">AS</span> key
    <span class="keyword">FROM</span> pg_index
) sub
<span class="keyword">GROUP BY</span> key <span class="keyword">HAVING</span> count(*) > <span class="number">1</span>;</code></pre>

                <h2>ü™® –ü–æ–¥–≤–æ–¥–Ω—ã–µ –∫–∞–º–Ω–∏</h2>
                <div class="accordion">
                    <div class="accordion-item">
                        <div class="accordion-header">
                            <strong>1. –ò–Ω–¥–µ–∫—Å –Ω–∞ Low Cardinality –∫–æ–ª–æ–Ω–∫–∞—Ö</strong>
                        </div>
                        <div class="accordion-content">
                            <p>–°–æ–∑–¥–∞–Ω–∏–µ B-Tree –∏–Ω–¥–µ–∫—Å–∞ –Ω–∞ –∫–æ–ª–æ–Ω–∫–µ —Å –º–∞–ª—ã–º –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ–º —É–Ω–∏–∫–∞–ª—å–Ω—ã—Ö –∑–Ω–∞—á–µ–Ω–∏–π (–Ω–∞–ø—Ä–∏–º–µ—Ä, <code>gender</code> –∏–ª–∏ <code>status</code>) —á–∞—Å—Ç–æ –±–µ—Å–ø–æ–ª–µ–∑–Ω–æ. –ü–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫ —Å–∫–æ—Ä–µ–µ –≤—ã–±–µ—Ä–µ—Ç Seq Scan, —Ç–∞–∫ –∫–∞–∫ —á–∏—Ç–∞—Ç—å –∏–Ω–¥–µ–∫—Å, –∞ –ø–æ—Ç–æ–º –ø—Ä—ã–≥–∞—Ç—å –≤ –∫—É—á—É (Heap) –¥–æ—Ä–æ–∂–µ, —á–µ–º –ø—Ä–æ—á–∏—Ç–∞—Ç—å –≤—Å—ë –ø–æ–¥—Ä—è–¥.</p>
                        </div>
                    </div>
                    <div class="accordion-item">
                        <div class="accordion-header">
                            <strong>2. –ë–ª–æ–∫–∏—Ä–æ–≤–∫–∞ —Ç–∞–±–ª–∏—Ü—ã –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏</strong>
                        </div>
                        <div class="accordion-content">
                            <p><code>CREATE INDEX</code> –±–ª–æ–∫–∏—Ä—É–µ—Ç —Ç–∞–±–ª–∏—Ü—É –Ω–∞ –∑–∞–ø–∏—Å—å (Exclusive Lock). –ù–∞ –±–æ–ª—å—à–æ–π —Ç–∞–±–ª–∏—Ü–µ –≤ –ø—Ä–æ–¥–µ —ç—Ç–æ –≤—ã–∑–æ–≤–µ—Ç –¥–∞—É–Ω—Ç–∞–π–º. <strong>–í—Å–µ–≥–¥–∞</strong> –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ <code>CREATE INDEX CONCURRENTLY</code>.</p>
                        </div>
                    </div>
                    <div class="accordion-item">
                        <div class="accordion-header">
                            <strong>3. –§—É–Ω–∫—Ü–∏–∏ —É–±–∏–≤–∞—é—Ç –∏–Ω–¥–µ–∫—Å</strong>
                        </div>
                        <div class="accordion-content">
                            <p>–ó–∞–ø—Ä–æ—Å <code>WHERE date(created_at) = '2023-01-01'</code> –ù–ï –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –∏–Ω–¥–µ–∫—Å –ø–æ <code>created_at</code>. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –¥–∏–∞–ø–∞–∑–æ–Ω <code>WHERE created_at >= ... AND created_at < ...</code> –∏–ª–∏ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–π –∏–Ω–¥–µ–∫—Å.</p>
                        </div>
                    </div>
                </div>

                <h2>üí° –õ–∞–π—Ñ—Ö–∞–∫–∏</h2>
                <ul>
                    <li><strong>–ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—É—â–µ—Å—Ç–≤–æ–≤–∞–Ω–∏—è:</strong> –ù–µ –¥–µ–ª–∞–π—Ç–µ <code>SELECT count(*)</code>, —á—Ç–æ–±—ã –ø—Ä–æ–≤–µ—Ä–∏—Ç—å –Ω–∞–ª–∏—á–∏–µ –∑–∞–ø–∏—Å–∏. –≠—Ç–æ –º–µ–¥–ª–µ–Ω–Ω–æ. –î–µ–ª–∞–π—Ç–µ <code>SELECT 1 FROM table WHERE condition LIMIT 1</code>.</li>
                    <li><strong>–ù–µ–Ω—É–∂–Ω—ã–µ –∏–Ω–¥–µ–∫—Å—ã:</strong> –†–µ–≥—É–ª—è—Ä–Ω–æ –ø—Ä–æ–≤–µ—Ä—è–π—Ç–µ <code>pg_stat_user_indexes</code>. –ò–Ω–¥–µ–∫—Å, –∫–æ—Ç–æ—Ä—ã–π –Ω–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è —á—Ç–µ–Ω–∏—è (<code>idx_scan</code>), –Ω–æ –∑–∞–º–µ–¥–ª—è–µ—Ç –∑–∞–ø–∏—Å—å ‚Äî —ç—Ç–æ —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–∏–π –¥–æ–ª–≥.</li>
                    <li><strong>Hypothetical Indexes:</strong> –í –Ω–µ–∫–æ—Ç–æ—Ä—ã—Ö —Ä–∞—Å—à–∏—Ä–µ–Ω–∏—è—Ö –º–æ–∂–Ω–æ —Å–æ–∑–¥–∞—Ç—å "–≤–∏—Ä—Ç—É–∞–ª—å–Ω—ã–π" –∏–Ω–¥–µ–∫—Å, —á—Ç–æ–±—ã –ø—Ä–æ–≤–µ—Ä–∏—Ç—å —á–µ—Ä–µ–∑ EXPLAIN, –±—É–¥–µ—Ç –ª–∏ –æ–Ω –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å—Å—è, –Ω–µ —Å–æ–∑–¥–∞–≤–∞—è –µ–≥–æ —Ñ–∏–∑–∏—á–µ—Å–∫–∏.</li>
                </ul>

                <div class="task-box">
                    <h4>üìã –ó–∞–¥–∞–Ω–∏–µ</h4>
                    <ul class="task-list">
                        <li>–°–æ–∑–¥–∞–π —á–∞—Å—Ç–∏—á–Ω—ã–π –∏–Ω–¥–µ–∫—Å –¥–ª—è –∞–∫—Ç–∏–≤–Ω—ã—Ö –æ—Ä–¥–µ—Ä–æ–≤ –∏ –ø—Ä–æ–≤–µ—Ä—å —á–µ—Ä–µ–∑ EXPLAIN</li>
                        <li>–°–æ–∑–¥–∞–π –ø–æ–∫—Ä—ã–≤–∞—é—â–∏–π –∏–Ω–¥–µ–∫—Å –∏ –¥–æ–±–µ–π—Å—è Index Only Scan</li>
                        <li>–î–æ–±–∞–≤—å GIN –∏–Ω–¥–µ–∫—Å –¥–ª—è JSONB –ø–æ–ª—è —Å –º–µ—Ç–∞–¥–∞–Ω–Ω—ã–º–∏</li>
                        <li>–†–µ–∞–ª–∏–∑—É–π keyset-–ø–∞–≥–∏–Ω–∞—Ü–∏—é –≤–º–µ—Å—Ç–æ OFFSET</li>
                        <li>–ù–∞–ø–∏—à–∏ –∑–∞–ø—Ä–æ—Å –¥–ª—è –ø–æ–∏—Å–∫–∞ –Ω–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º—ã—Ö –∏–Ω–¥–µ–∫—Å–æ–≤</li>
                    </ul>
                </div>

                <div class="nav-footer">
                    <a href="part1_transactions.html">
                        <div>
                            <div class="nav-label">–ù–∞–∑–∞–¥</div>
                            <div class="nav-title">‚Üê 1.2 –¢—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏</div>
                        </div>
                    </a>
                    <a href="part2_litestar.html">
                        <div>
                            <div class="nav-label">–î–∞–ª–µ–µ</div>
                            <div class="nav-title">2.1 Litestar + DDD ‚Üí</div>
                        </div>
                    </a>
                </div>
            </div>
        </main>
    </div>
</body>
</html>
