<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>9.3 OpenAPI & Ops ‚Äî ScaleTrade</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&family=JetBrains+Mono:wght@400;500&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <div class="book-layout">
        <aside class="sidebar">
            <div class="sidebar-header">
                <a href="index.html" class="logo">
                    <div class="logo-icon">üìà</div>
                    <span>ScaleTrade</span>
                </a>
            </div>
            <nav class="sidebar-nav">
                <div class="nav-section">
                    <div class="nav-section-title">–í–≤–µ–¥–µ–Ω–∏–µ</div>
                    <a href="index.html" class="nav-link">üè† –ì–ª–∞–≤–Ω–∞—è</a>
                </div>
                <div class="nav-section">
                    <div class="nav-section-title">–ß–∞—Å—Ç—å 9: API</div>
                    <a href="part9_restdesign.html" class="nav-link">9.1 REST Design</a>
                    <a href="part9_idempotency.html" class="nav-link">9.2 Idempotency</a>
                    <a href="part9_openapi.html" class="nav-link active">9.3 OpenAPI</a>
                </div>
            </nav>
        </aside>

        <main class="main-content">
            <header class="header">
                <div class="breadcrumb">
                    <a href="index.html">ScaleTrade</a>
                    <span>/</span>
                    <span>–ß–∞—Å—Ç—å 9</span>
                    <span>/</span>
                    <span>9.3 Documentation</span>
                </div>
            </header>

            <div class="page-content">
                <h1>–ú–æ–¥—É–ª—å 9.3: OpenAPI, ADR –∏ –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è</h1>
                <p class="lead">–ö–æ–¥ –∑–∞–±—ã–≤–∞–µ—Ç—Å—è —á–µ—Ä–µ–∑ –¥–≤–µ –Ω–µ–¥–µ–ª–∏. –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –æ—Å—Ç–∞–µ—Ç—Å—è. OpenAPI –¥–µ–ª–∞–µ—Ç –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—é –∂–∏–≤–æ–π.</p>

                <h2>OpenAPI (Swagger) First vs Code First</h2>
                <div class="comparison-table">
                    <div class="comparison-col good">
                        <h4>Code First (Litestar/FastAPI)</h4>
                        <p>–ü–∏—à–µ—Ç–µ Python –∫–æ–¥, –∞–Ω–Ω–æ—Ç–∞—Ü–∏–∏ —Ç–∏–ø–æ–≤, Pydantic –º–æ–¥–µ–ª–∏. –°—Ö–µ–º–∞ –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç—Å—è —Å–∞–º–∞.</p>
                        <ul>
                            <li>‚úÖ –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç</li>
                            <li>‚úÖ –í—Å–µ–≥–¥–∞ –∞–∫—Ç—É–∞–ª—å–Ω–æ (Sync)</li>
                            <li>‚ùå –°–ª–æ–∂–Ω–æ –¥–∏–∑–∞–π–Ω–∏—Ç—å API –∑–∞—Ä–∞–Ω–µ–µ</li>
                        </ul>
                    </div>
                    <div class="comparison-col">
                        <h4>Schema First</h4>
                        <p>–ü–∏—à–µ—Ç–µ YAML —Ñ–∞–π–ª –≤—Ä—É—á–Ω—É—é, –ø–æ—Ç–æ–º –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç–µ —Å–µ—Ä–≤–µ—Ä–Ω—ã–π –∫–æ–¥.</p>
                        <ul>
                            <li>‚úÖ –Ø—Å–Ω—ã–π –∫–æ–Ω—Ç—Ä–∞–∫—Ç –¥–æ –Ω–∞—á–∞–ª–∞ –∫–æ–¥–∏–Ω–≥–∞</li>
                            <li>‚úÖ Frontend –º–æ–∂–µ—Ç –¥–µ–ª–∞—Ç—å –º–æ–∫–∏ —Å—Ä–∞–∑—É</li>
                            <li>‚ùå –ì–µ–º–æ—Ä—Ä–æ–π —Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π YAML</li>
                        </ul>
                    </div>
                </div>

                <h3>–£–ª—É—á—à–∞–µ–º –∞–≤—Ç–æ–≥–µ–Ω–µ—Ä–∞—Ü–∏—é</h3>
                <p>–ü—Ä–æ—Å—Ç–æ —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω–Ω–æ–π —Å—Ö–µ–º—ã –º–∞–ª–æ. –î–æ–±–∞–≤–ª—è–π—Ç–µ –ø—Ä–∏–º–µ—Ä—ã!</p>

<pre><code class="language-python">class UserCreate(BaseModel):
    username: str = Field(
        min_length=3, 
        examples=["cool_hacker_99"], 
        description="Unique system identifier"
    )
    age: int = Field(
        gt=0, 
        examples=[25], 
        description="Age in years"
    )
</code></pre>

                <h2>Architecture Decision Records (ADR)</h2>
                <p>–ü–æ—á–µ–º—É –º—ã –≤—ã–±—Ä–∞–ª–∏ Redis, –∞ –Ω–µ Memcached? –ü–æ—á–µ–º—É PostgreSQL, –∞ –Ω–µ Mongo? –ß–µ—Ä–µ–∑ –≥–æ–¥ –Ω–∏–∫—Ç–æ –Ω–µ –≤—Å–ø–æ–º–Ω–∏—Ç. –ó–∞–ø–∏—Å—ã–≤–∞–π—Ç–µ!</p>

                <div class="info-box">
                    <p>ADR ‚Äî —ç—Ç–æ –ª–µ–≥–∫–æ–≤–µ—Å–Ω—ã–π —Ç–µ–∫—Å—Ç–æ–≤—ã–π —Ñ–∞–π–ª, –∫–æ—Ç–æ—Ä—ã–π —Ö—Ä–∞–Ω–∏—Ç—Å—è –ø—Ä—è–º–æ –≤ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–∏ (–æ–±—ã—á–Ω–æ –≤ <code>/docs/adr</code>).</p>
                </div>

                <h3>–°—Ç—Ä—É–∫—Ç—É—Ä–∞ ADR</h3>
                <ol>
                    <li><strong>Title:</strong> ADR-005: Use UUIDs for Primary Keys</li>
                    <li><strong>Status:</strong> Accepted / Rejected / Deprecated</li>
                    <li><strong>Context:</strong> –ü—Ä–æ–±–ª–µ–º–∞. Int ID –ø—Ä–µ–¥—Å–∫–∞–∑—É–µ–º—ã, —Å–ª–æ–∂–Ω–æ –º–µ—Ä–∂–∏—Ç—å –±–∞–∑—ã.</li>
                    <li><strong>Decision:</strong> –†–µ—à–µ–Ω–∏–µ. –ë—É–¥–µ–º –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å UUIDv7.</li>
                    <li><strong>Consequences:</strong>
                        <ul>
                            <li>(+) –°–µ–∫—å—é—Ä–Ω–æ, –º–æ–∂–Ω–æ –≥–µ–Ω–µ—Ä–∏—Ç—å –Ω–∞ –∫–ª–∏–µ–Ω—Ç–µ.</li>
                            <li>(-) –ß—É—Ç—å –º–µ–¥–ª–µ–Ω–Ω–µ–µ INSERT, –±–æ–ª—å—à–µ –º–µ—Å—Ç–∞ –Ω–∞ –¥–∏—Å–∫–µ.</li>
                        </ul>
                    </li>
                </ol>

                <h2>Diagrams as Code (Mermaid.js)</h2>
                <p>–ù–µ —Ä–∏—Å—É–π—Ç–µ –≤ Visio/Draw.io, –±–∏–Ω–∞—Ä–Ω–∏–∫–∏ —Å–ª–æ–∂–Ω–æ –≤–µ—Ä—Å–∏–æ–Ω–∏—Ä–æ–≤–∞—Ç—å. –†–∏—Å—É–π—Ç–µ –∫–æ–¥–æ–º –≤ Markdown!</p>

<pre class="mermaid">
sequenceDiagram
    Client->>API: POST /orders
    API->>DB: Save Order (Pending)
    API->>RabbitMQ: Publish OrderCreated
    RabbitMQ-->>Worker: Consume
    Worker->>PaymentProvider: Charge Card
    PaymentProvider-->>Worker: Success
    Worker->>DB: Update Order (Paid)
</pre>

                <h2>ü™® –ü–æ–¥–≤–æ–¥–Ω—ã–µ –∫–∞–º–Ω–∏</h2>
                <div class="accordion">
                    <div class="accordion-item">
                        <div class="accordion-header">
                            <strong>1. Swagger UI –Ω–∞ –ø—Ä–æ–¥–µ</strong>
                        </div>
                        <div class="accordion-content">
                            <p>–≠—Ç–æ –¥—ã—Ä–∞ –≤ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏. –ó–ª–æ—É–º—ã—à–ª–µ–Ω–Ω–∏–∫ –≤–∏–¥–∏—Ç –≤—Å–µ —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã –∏ —Å—Ç—Ä—É–∫—Ç—É—Ä—ã –¥–∞–Ω–Ω—ã—Ö. –û—Ç–∫–ª—é—á–∞–π—Ç–µ <code>/docs</code> –∏ <code>/openapi.json</code> –≤ production –æ–∫—Ä—É–∂–µ–Ω–∏–∏ (–∏–ª–∏ –ø—Ä—è—á—å—Ç–µ –∑–∞ VPN/Basic Auth).</p>
                        </div>
                    </div>
                    <div class="accordion-item">
                        <div class="accordion-header">
                            <strong>2. Schema First vs Real World</strong>
                        </div>
                        <div class="accordion-content">
                            <p>–ï—Å–ª–∏ –≤—ã –ø–∏—à–µ—Ç–µ YAML –≤—Ä—É—á–Ω—É—é, –æ–Ω <strong>–≤—Å–µ–≥–¥–∞</strong> –±—É–¥–µ—Ç —Ä–∞—Å—Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä–æ–≤–∞–Ω —Å –∫–æ–¥–æ–º. –õ–∏–±–æ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ –∂–µ—Å—Ç–∫—É—é –∫–æ–¥–æ–≥–µ–Ω–µ—Ä–∞—Ü–∏—é —Å–µ—Ä–≤–µ—Ä–∞ –∏–∑ —Å—Ö–µ–º—ã, –ª–∏–±–æ Code First (FastAPI/Litestar). –ü–æ–ª—É–º–µ—Ä—ã –Ω–µ —Ä–∞–±–æ—Ç–∞—é—Ç.</p>
                        </div>
                    </div>
                    <div class="accordion-item">
                        <div class="accordion-header">
                            <strong>3. AnyOf / AllOf / OneOf</strong>
                        </div>
                        <div class="accordion-content">
                            <p>–°–ª–æ–∂–Ω—ã–µ –∫–æ–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ OpenAPI (`oneOf`, –ø–æ–ª–∏–º–æ—Ä—Ñ–∏–∑–º) —á–∞—Å—Ç–æ –ª–æ–º–∞—é—Ç –∫–æ–¥–æ–≥–µ–Ω–µ—Ä–∞—Ç–æ—Ä—ã –∫–ª–∏–µ–Ω—Ç–æ–≤ (–æ—Å–æ–±–µ–Ω–Ω–æ –Ω–∞ Dart/Java). –°—Ç–∞—Ä–∞–π—Ç–µ—Å—å –¥–µ—Ä–∂–∞—Ç—å —Å—Ö–µ–º—ã –ø—Ä–æ—Å—Ç—ã–º–∏ (KISS).</p>
                        </div>
                    </div>
                </div>

                <h2>üí° –õ–∞–π—Ñ—Ö–∞–∫–∏</h2>
                <ul>
                    <li><strong>Orval / openapi-typescript:</strong> –ù–µ –ø–∏—à–∏—Ç–µ —Ç–∏–ø—ã –Ω–∞ TypeScript —Ä—É–∫–∞–º–∏. –ì–µ–Ω–µ—Ä–∏—Ä—É–π—Ç–µ SDK –¥–ª—è —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–∞ –æ–¥–Ω–æ–π –∫–æ–º–∞–Ω–¥–æ–π –∏–∑ OpenAPI —Å—Ö–µ–º—ã. –≠—Ç–æ –≥–∞—Ä–∞–Ω—Ç–∏—Ä—É–µ—Ç Contract Testing –Ω–∞ —ç—Ç–∞–ø–µ –∫–æ–º–ø–∏–ª—è—Ü–∏–∏.</li>
                    <li><strong>MkDocs Material:</strong> –°–æ–±–µ—Ä–∏—Ç–µ –≤—Å—é –¥–æ–∫—É –≤ –æ–¥–Ω–æ–º –º–µ—Å—Ç–µ. MkDocs —É–º–µ–µ—Ç —Ä–µ–Ω–¥–µ—Ä–∏—Ç—å Markdown, ADR, Mermaid –¥–∏–∞–≥—Ä–∞–º–º—ã –∏ –¥–∞–∂–µ –≤—Å—Ç—Ä–∞–∏–≤–∞—Ç—å Swagger UI —á–µ—Ä–µ–∑ –ø–ª–∞–≥–∏–Ω. –ò–¥–µ–∞–ª—å–Ω–∞—è –±–∞–∑–∞ –∑–Ω–∞–Ω–∏–π (Knowledge Base).</li>
                    <li><strong>Spectral:</strong> –õ–∏–Ω—Ç–µ—Ä –¥–ª—è OpenAPI. –ü—Ä–æ–≤–µ—Ä—è–µ—Ç, —á—Ç–æ —É –≤—Å–µ—Ö —ç–Ω–¥–ø–æ–∏–Ω—Ç–æ–≤ –µ—Å—Ç—å –æ–ø–∏—Å–∞–Ω–∏–µ, –ø—Ä–∏–º–µ—Ä—ã –∏ –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–µ —Å—Ç–∞—Ç—É—Å-–∫–æ–¥—ã.</li>
                </ul>

                <div class="task-box">
                    <h4>üéØ –ü—Ä–∞–∫—Ç–∏–∫–∞</h4>
                    <ul class="task-list">
                        <li>–ù–∞—Å—Ç—Ä–æ–π –≥–µ–Ω–µ—Ä–∞—Ü–∏—é OpenAPI —Å—Ö–µ–º—ã –≤ CI/CD</li>
                        <li>–ù–∞–ø–∏—à–∏ ADR "–í—ã–±–æ—Ä –±—Ä–æ–∫–µ—Ä–∞ –æ—á–µ—Ä–µ–¥–µ–π"</li>
                        <li>–°–≥–µ–Ω–µ—Ä–∏—Ä—É–π TypeScript –∫–ª–∏–µ–Ω—Ç —á–µ—Ä–µ–∑ Orval</li>
                        <li>–ù–∞—Å—Ç—Ä–æ–π MkDocs —Å –ø–ª–∞–≥–∏–Ω–æ–º techdocs-core</li>
                    </ul>
                </div>
            </div>
        </main>
    </div>
</body>
</html>